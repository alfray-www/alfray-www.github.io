<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport"    content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author"      content="">

<link href="atom.xml" type="application/atom+xml" rel="alternate" title="Atom feed for Blog: Model Train-related Notes" />

<meta property="og:url"         content="https://www.alfray.com/trains/blog/train/index.html" />
<meta property="og:type"        content="article" />

<meta property="og:title"       content="Blog: Model Train-related Notes" />
<meta property="og:description" content="One of the things I get from the new version of Wazz, the dashboard keeping track of the automation, are timings when the automation computer starts in the morning:" />
<meta property="og:image"       content="https://www.alfray.com/trains/blog/train/img_1af5f922b381a636bd4462f104726884b867c92d66664452d9cae81e9b6ae851i.png" />

<meta name="twitter:card"        content="summary" />
<!-- meta name="twitter:site"    content="@flickr" / -->

<meta name="twitter:title"       content="Blog: Model Train-related Notes" />
<meta name="twitter:description" content="One of the things I get from the new version of Wazz, the dashboard keeping track of the automation, are timings when the automation computer starts in the morning:" />
<meta name="twitter:image"       content="https://www.alfray.com/trains/blog/train/img_1af5f922b381a636bd4462f104726884b867c92d66664452d9cae81e9b6ae851i.png" />

<title>Blog: Model Train-related Notes</title>

<script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5c66171070e9220011ed1c61&product=inline-share-buttons" async="async"></script>

<!-- Custom styles for this template -->
<style type="text/css">
body {
    font-family: sans-serif;
    margin: 0;
}

.main {
    margin: 8px;
}

p, span {
    line-height: 1.2;
    text-align: justify;
}

p.console {
    margin: 0;
    padding: 0;
}

.container {
    max-width: 95%;
}

@media screen and (min-width: 600px) {
    .container {
        max-width: 60rem;
    }
}

.center-horiz {
    margin: auto;
}

.no-margin-container {
}

/* Header + Title */
.blog-header {
  margin-bottom: 3rem;
  background-color: #428bca;
  box-shadow: inset 0 -.1rem .25rem rgba(0,0,0,.1);
}


.banner-bg-image {
    height: 50px;
    background-image: url("header.jpg");
    background-position: center;
    background-size: 100% auto;
}

@media screen and (min-width: 600px) {
    .banner-bg-image {
        height: 200px;
    }
}


.title-container {
    color: #fff;
    padding: 1rem;
    line-height: 1.5;
    font-weight: 500;
    font-size: 24px;
    font-family: sans-serif;
}

.title-container a {
    color: #fff;
    text-decoration: none;
}

.post-container {
}

.bottom-container {
    margin-top: 8px;
    color: #fff;
    background-color: #428bca;
    font-family: sans-serif;
    text-align: center;
    font-size: small;
    line-height: 1rem;
}

@media screen and (min-width: 600px) {
    .bottom-container {
        font-size: x-small;
    }
}

.post-title-container {
    position: relative;
    background-color: #428bca;
    padding: 0.5rem;
}

.post-title {
    display: inline;
    color: #fff;
    font-weight: 500;
    font-family: sans-serif;
    font-size: 1.5em;
}

a.post-title-link {
    color: #fff;
    text-decoration: none;
}

.post-cat {
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    padding: 0.25rem;
    background-color: #d0e0e3;
    color: #000;
    font-weight: 500;
    font-family: sans-serif;
    font-size: 1.5em;
}

a.post-cat-link {
    color: #000;
    text-decoration: none;
}

.post-cat-label {
    display: block;
    text-align: right;
    color: #000;
    font-size: 0.4em;
}

.prev-next-container {
    overflow: auto;
}

.prev-page {
    float: left;
    line-height: 2em;
}

.next-page {
    float: right;
    line-height: 2em;
}

h1, h2, h3, h4, h5, h6 {
    font-family: sans-serif;
    font-weight: bold;
}

.text-hide {
    font: 0/0 a;
    color: transparent;
    text-shadow: none;
    background-color: transparent;
    border: 0;
}

td p {
    margin: 0;
}


</style>
</head>

<body>

<header class="blog-header">

    <div class="no-margin-container banner-bg-image text-hide">
        Site Banner Image
    </div>

    <div class="title-container">
        <a href="https://www.alfray.com/trains/">Ralf's Train Pages</a>
        
        /
        <a href="index.html">Blog: Model Train-related Notes</a>
        
    </div>
</header>

<main role="main">
<div class="main">
<div class="container center-horiz">

<p><span> </span></p>
<p><span></span></p>
<p><span> </span></p>
<table style="border-collapse:collapse;border-spacing:0;margin-left:auto;margin-right:auto">
 <tbody>
  <tr style="height:0pt">
   <td colspan="1" rowspan="1" style="background-color:rgb(103, 78, 167);border-bottom-color:rgb(255, 255, 255);border-bottom-style:solid;border-bottom-width:1pt;border-left-color:rgb(255, 255, 255);border-left-style:solid;border-left-width:1pt;border-right-color:rgb(255, 255, 255);border-right-style:solid;border-right-width:1pt;border-top-color:rgb(255, 255, 255);border-top-style:solid;border-top-width:1pt;padding:7.2pt 7.2pt 7.2pt 7.2pt;vertical-align:top;width:149.4pt"><p style="text-align:center"><span style="-webkit-text-decoration-skip:none;color:rgb(255, 217, 102);font-size:14pt;font-weight:700;text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/" style="color:inherit;text-decoration:inherit">Train Pages</a></span></p></td>
   <td colspan="1" rowspan="1" style="background-color:rgb(103, 78, 167);border-bottom-color:rgb(255, 255, 255);border-bottom-style:solid;border-bottom-width:1pt;border-left-color:rgb(255, 255, 255);border-left-style:solid;border-left-width:1pt;border-right-color:rgb(255, 255, 255);border-right-style:solid;border-right-width:1pt;border-top-color:rgb(255, 255, 255);border-top-style:solid;border-top-width:1pt;padding:7.2pt 7.2pt 7.2pt 7.2pt;vertical-align:top;width:149.4pt"><p style="text-align:center"><span style="-webkit-text-decoration-skip:none;color:rgb(255, 217, 102);font-size:14pt;font-weight:700;text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/blog/train/" style="color:inherit;text-decoration:inherit">Tech Blog</a></span></p></td>
   <td colspan="1" rowspan="1" style="background-color:rgb(103, 78, 167);border-bottom-color:rgb(255, 255, 255);border-bottom-style:solid;border-bottom-width:1pt;border-left-color:rgb(255, 255, 255);border-left-style:solid;border-left-width:1pt;border-right-color:rgb(255, 255, 255);border-right-style:solid;border-right-width:1pt;border-top-color:rgb(255, 255, 255);border-top-style:solid;border-top-width:1pt;padding:7.2pt 7.2pt 7.2pt 7.2pt;vertical-align:top;width:149.4pt"><p style="text-align:center"><span style="-webkit-text-decoration-skip:none;color:rgb(255, 217, 102);font-size:14pt;font-weight:700;text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/rtac.html" style="color:inherit;text-decoration:inherit">RTAC Software</a></span></p></td>
   <td colspan="1" rowspan="1" style="background-color:rgb(103, 78, 167);border-bottom-color:rgb(255, 255, 255);border-bottom-style:solid;border-bottom-width:1pt;border-left-color:rgb(255, 255, 255);border-left-style:solid;border-left-width:1pt;border-right-color:rgb(255, 255, 255);border-right-style:solid;border-right-width:1pt;border-top-color:rgb(255, 255, 255);border-top-style:solid;border-top-width:1pt;padding:7.2pt 7.2pt 7.2pt 7.2pt;vertical-align:top;width:149.4pt"><p style="text-align:center"><span style="-webkit-text-decoration-skip:none;color:rgb(255, 217, 102);font-size:14pt;font-weight:700;text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.youtube.com/c/raphaelmoll" style="color:inherit;text-decoration:inherit">Videos</a></span></p></td>
  </tr>
 </tbody>
</table>
<p></p>
<p><span style="font-style:italic">Model Train-related Notes Blog -- t</span><span style="font-style:italic">hese are personal notes and musings on the subject of model train control, automation, electronics, or whatever I find interesting. I also have more posts in a blog dedicated to the maintenance of the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);font-style:italic;text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/blog/randall/" style="color:inherit;text-decoration:inherit">Randall Museum Model Railroad</a></span><span style="font-style:italic">.</span></p>
<p><span></span></p>

<div class="prev-next-container">

    <span class="prev-page"></span>
    <span class="next-page"><a href="0001.html">Older Posts ⇒</a><br/></span>


</div>



    <div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2025-09-04_conductor_2_startup_time.html">
    <h2 class="post-title">2025-09-04 - Conductor 2: Startup Time</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    Rtac
    
    </span>
</span></div>

<p><span></span></p>
<p></p>
<p><span>One of the things I get from the new version of </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/wazz/" style="color:inherit;text-decoration:inherit">Wazz</a></span><span>, the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/blog/randall/2025-08-23_dashboard_update.html" style="color:inherit;text-decoration:inherit">dashboard keeping track of the automation</a></span><span>, are timings when the automation computer starts in the morning:</span></p>
<p></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:308.00px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:550.00px"><img alt="" src="img_1af5f922b381a636bd4462f104726884b867c92d66664452d9cae81e9b6ae851i.png" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p></p>
<p><span>So here are the events listed above:</span></p>
<ul style="margin:0">
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Computer is powered on by the staff… It takes some time for Linux to book and go through the systemd init. I don’t have that timing in the events above. Measuring it with a watchclock a while ago, I believe it’s in the 10-20 seconds range.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>9:47:25am: The “computer consist” event is sent as soon as we reach </span><span style="font-style:italic">runlevel 5</span><span>, the multi-user GUI. That starts a script which runs a git update on the JMRI roster, and then starts JMRI software. </span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>9:48:46am: 81 seconds later, the “conductor running” event indicates that Conductor add-on software is loaded in JMRI. These 81 seconds correspond to the loading time of JMRI, before it invokes a Jython add-on trampoline that loads the Kotlin program Conductor in the JVM. It’s all a game of classloaders and stuff, and they essentially all run in the same JVM. But still, we basically have little control on that 81 seconds timing. It’s what JMRI takes to load.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>9:49:15am: 29 seconds later, the “conductor script” event indicates that Conductor is loading the Kotlin Script for the actual automation script. That includes Conductor opening its UI, loading the SVG map, etc.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>9:49:15am: Less than a second later, the “toggle” events are emitted by the automation script as soon as it starts executing. At that point, the automation is “live”.</span></li>
</ul>
<p></p>
<p><span>In total, it takes about 2 minutes from cold “computer off” to the automation being active.</span></p>
<p></p>
<p></p>
<hr>
<p></p>
<p><span></span></p>


</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2025-08-23_wazz_web_dashboard_update.html">
    <h2 class="post-title">2025-08-23 - Wazz Web Dashboard Update</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    
    <a class="post-cat-link" href="../../blog/train" title="View All Category Posts">Train</a>
    </span>
</span></div>

<p></p>
<p><span>“</span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/wazz/" style="color:inherit;text-decoration:inherit">Wazz</a></span><span>” is my own web-based dashboard to get an instant overview of the automation at the Randall Museum Model Railroad. </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/blog/train/2025-07-07_new_wazz_web_dashboard.html" style="color:inherit;text-decoration:inherit">Last month, I started revamping the web site</a></span><span>&nbsp;with a more modern implementation, and after about a month of work, I’ve just finished this major rework on the status dashboard with the following architecture:</span></p>
<p></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:196.08px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:796.80px"><img alt="" src="img_940d6c4be6094d2d9b07997b3831fb09ac0e2659ed6ad72d94a95f6ea8a39198d.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p></p>
<p><span>This now results in a web page giving a dashboard like this: </span></p>
<p></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:1.33px solid #b7b7b7;display:inline-block;height:321.50px;margin:0.00px -0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:575.81px"><img alt="" src="img_4b35daa447ac582316576154103a0fb48d7a5d76d9e4cbd341a11902254fff0ci.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p></p>
<p><span>This page gives me an overview of which computers are on, wherever the automated lines are active (the “toggles”), and which train ran last, and whether it completed its run properly.</span></p>
<p></p>
<p><span>The major visible part is this new “performance” tab that lets me see how the trains behave on their respective route:</span></p>
<p><span></span></p>

<a href="2025-08-23_wazz_web_dashboard_update.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2025-07-07_new_wazz_web_dashboard.html">
    <h2 class="post-title">2025-07-07 - New Wazz Web Dashboard</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    Rtac
    
    </span>
</span></div>

<p><span></span></p>
<p></p>
<p><span>“</span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/wazz/" style="color:inherit;text-decoration:inherit">Wazz</a></span><span>” is my own web-based dashboard to get an instant overview of the automation at the Randall Museum Model Railroad. It used to be a crummy javascript single-page web page that I had hacked quickly over the years. I decided to entirely rebuild it using </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://react.dev/learn/typescript" style="color:inherit;text-decoration:inherit">React, TypeScript</a></span><span>, and </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://vite.dev/" style="color:inherit;text-decoration:inherit">Vite</a></span><span>.</span></p>
<p style="text-align:left"></p>
<p style="text-align:left"><span>The source is available on the here: </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://github.com/model-railroad/conductor/tree/main/web/wazz" style="color:inherit;text-decoration:inherit">https://github.com/model-railroad/conductor/tree/main/web/wazz</a></span></p>
<p style="text-align:left"></p>
<p style="text-align:left"><span>And the web app is deployed here: </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/wazz/" style="color:inherit;text-decoration:inherit">https://www.alfray.com/trains/randall/wazz/</a></span></p>
<p style="text-align:left"></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:304.00px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:796.80px"><img alt="" src="img_ae694087e99e928a98fcd97a2e9b2ba610628be873805445955c0ceb220b5847i.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p></p>
<p><span>I used JetBrains’ WebStorm as the IDE; that was a nice step up from my usual VSCode setup. Not much to discuss on the implementation side -- it’s really your typical no-thrills React-TypeScript web app.</span></p>
<p></p>
<p><span>The </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/rtac.html" style="color:inherit;text-decoration:inherit">Conductor automation software</a></span><span>&nbsp;exports a JSON status, which this reads, and displays. There’s an automatic refresh every 10 minutes. Note that this isn’t hosted in any cloud -- it totally relies on the automation computer at Randall having wifi access to the internet. The uptime for that connection is around 95%. Since it’s mostly a remote view dashboard, I don’t need a perfect uptime, nor do I expect it to have a high traffic load.</span></p>
<p></p>
<p><span>I’m essentially the sole user of that dashboard. Which also explains why the display may look cryptic -- it displays exactly what I want the way I want it, with no effort to be legible by people unfamiliar with the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/rtac.html" style="color:inherit;text-decoration:inherit">Conductor</a></span><span>&nbsp;software.</span></p>
<p></p>
<hr>
<p></p>


</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2025-04-07_distant_signal_the_hub75_pro_6347ebc3.html">
    <h2 class="post-title">2025-04-07 - Distant Signal: The HUB75 Protocol for LED Matrix Displays</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    Arduino
    
    </span>
</span></div>

<p><span></span></p>
<p></p>
<p style="text-align:left"><span>This is the display I use for </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://github.com/model-railroad/distant-signal" style="color:inherit;text-decoration:inherit">Distant Signal</a></span><span>:</span></p>
<ul style="margin:0">
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.adafruit.com/product/2278" style="color:inherit;text-decoration:inherit">https://www.adafruit.com/product/2278</a></span><span>&nbsp;$40, 64x32 with 4 mm pitch.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.aliexpress.us/item/3256808335479840.html" style="color:inherit;text-decoration:inherit">https://www.aliexpress.us/item/3256808335479840.html</a></span><span>, $18, 64x32 with 4 mm pitch.</span></li>
</ul>
<p></p>
<p><span>Here’s the AliExpress one in use:</span></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:349.33px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:796.80px"><img alt="" src="img_35fa0cf0851544c9c6af1ca46d8711a2249d7f5f89031158185433f915e89feci.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p></p>
<p><span>Using the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.adafruit.com/product/2278" style="color:inherit;text-decoration:inherit">AdaFruit version</a></span><span>, here’s what the back of the panel looks like, annotated:</span></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:332.00px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:690.00px"><img alt="" src="img_c47ba6195a160e05e2c3abbda43336160088e269a84a992fdc81f09a025ab9e3d.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span><span><br></span><span style="font-size:9pt;font-style:italic">Source: </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);font-size:9pt;font-style:italic;text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.adafruit.com/product/2278" style="color:inherit;text-decoration:inherit">AdaFruit</a></span><span style="font-style:italic">.</span></p>
<p></p>
<p><span>Notice the little vertical chips that are highlighted in Red, Green, Blue above. There are 4 x 3 x 2 of them.</span></p>
<p></p>
<p><span>The HUB75 connector is an industry ad-hoc connector. As far as I can tell, there is no solid specification anywhere to be found. Instead, it seems to have evolved over the years, and used more or less in a compatible way.</span></p>
<p><span></span></p>

<a href="2025-04-07_distant_signal_the_hub75_pro_6347ebc3.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2025-03-30_distant_signal_matrix_displa_0df54754.html">
    <h2 class="post-title">2025-03-30 - Distant Signal: Matrix Display for Turnout T330, Continued</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    Arduino
    
    </span>
</span></div>

<p><span></span></p>
<p></p>
<p><span>A bit more progress on the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://github.com/model-railroad/distant-signal" style="color:inherit;text-decoration:inherit">Distant Signal</a></span><span>&nbsp;project: the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/blog/train/2025-03-26_matrix_display_for_turnout_t330.html" style="color:inherit;text-decoration:inherit">initial configuration script</a></span><span>&nbsp;consisted of purely graphics primitives, and the automation would select which of the predetermined states to display.</span></p>
<p></p>
<p><span>That’s good, but when I’m going to have several of these displays for several turnouts, I realize there’s a lot of repetition because each state represents the </span><span style="font-style:italic">entire</span><span>&nbsp;screen -- thus each state needs to repeat the title, or the block numbers, for example. Instead, the new direction is to have “layers” to avoid repetition:</span></p>
<ul style="margin:0">
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>A title layer defines the display… title. That’s all.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>A “states” layer defines multiple track states for the given turnout (typically 2).</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>A “blocks” layer defines the block numbers to draw next to the track, and that means we can now have active vs inactive blocks and thus render them accordingly.</span></li>
</ul>
<p></p>
<p><span>With that approach, we can change the display to look like this:</span></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:402.67px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:796.80px"><img alt="" src="img_a1c5b44182109ded196892e53814eaae322ee6b054b467a52d0b392ea078b353i.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p></p>
<p><span>[Edit: And future me even added a view of this panel with a further style update, seen here in-situ:]</span></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:349.33px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:796.80px"><img alt="" src="img_35fa0cf0851544c9c6af1ca46d8711a2249d7f5f89031158185433f915e89feci.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p><span></span></p>

<a href="2025-03-30_distant_signal_matrix_displa_0df54754.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2025-03-26_distant_signal_matrix_displa_08700264.html">
    <h2 class="post-title">2025-03-26 - Distant Signal: Matrix Display for Turnout T330</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    Arduino
    
    </span>
</span></div>

<p><span></span></p>
<p></p>
<p><span>Here’s a new project, </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://github.com/model-railroad/distant-signal" style="color:inherit;text-decoration:inherit">Distant Signal</a></span><span>: </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://github.com/model-railroad/distant-signal" style="color:inherit;text-decoration:inherit">https://github.com/model-railroad/distant-signal</a></span></p>
<p></p>
<p><span>The goal of this project is to display the state of a remote model-railroad turnout on a LED Matrix Display. That’s obviously the “phase 2” of the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/blog/train/2025-03-20_indicator_for_turnout_t330.html" style="color:inherit;text-decoration:inherit">single-LED ESP32 display I toyed with last week</a></span><span>.</span></p>
<p></p>
<p><span>The hardware for this project is an </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.adafruit.com/product/5778" style="color:inherit;text-decoration:inherit">AdaFruit MatrixPortal ESP32-S3</a></span><span>&nbsp;driving an </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.adafruit.com/product/2278" style="color:inherit;text-decoration:inherit">AdaFruit 64x32 RGB LED Matrix</a></span><span>&nbsp;- or more exactly some clone/equivalent of such.</span></p>
<p></p>
<p><span>Overall, the project works exactly the same as the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/blog/train/2025-03-20_indicator_for_turnout_t330.html" style="color:inherit;text-decoration:inherit">single-LED version</a></span><span>&nbsp;did:</span></p>
<p></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:194.89px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:796.80px"><img alt="" src="img_313cc83d89e448e7a4d4c9c64d76e27b96f0b8f1f0afbb20fd0c83c5f94d0527d.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p></p>
<p><span>Here’s the first iteration of the display:</span></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:408.00px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:796.80px"><img alt="" src="img_a97b46ea9076865c58811aa8b56cdf3a44a9ebf3a4c3f59a6685fc38679324d4i.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p></p>
<p><span>This version uses a basic text-based configuration script to define the content of the screen:</span></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:361.33px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:796.80px"><img alt="" src="img_c66fa6145f0ce89f32c986097acb6ed5273e3d568597bd98c52dd95dc8c9c9e7i.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p></p>
<p><span>That’s the configuration script that the Conductor automation program would send to the display to initialize it. The configuration script defines several “states”, for example “T330 normal” vs “T330 reverse”. Each state is describes the entire content of a screen using a set of graphic primitives -- line, rect, text, and polygon. </span></p>
<p></p>
<p><span>Then MQTT would be used to select which state to display -- in this case turnout states, as the automation dictates which state should be displayed based on turnout sensor feedback. From the ESP32 point of view, the behavior is totally agnostic -- all it does is display a full screen of “something”.</span></p>
<p></p>
<hr>
<p></p>


</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2025-03-20_indicator_for_turnout_t330.html">
    <h2 class="post-title">2025-03-20 - Indicator for Turnout T330</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    Arduino
    
    </span>
</span></div>

<p><span></span></p>
<p></p>
<p><span>Here’s a new a experiment: we now have a new visual indicator of the position of the Sonora turnout T330, designed to be visible by the Saturday operators when standing at the Stockton Yard:</span></p>
<p></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:469.79px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:796.80px"><img alt="" src="img_3fa2e233e5c3ffc585168fee9c57e5c5ea4ca1ea4e7314043e042be6405549f8d.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p></p>
<p><span>Sonora has the two mainline tracks that merge together at turnout T330, and there’s a signal bridge with signals that clearly indicate the position of the turnout. The problem is that the signal bridge is not visible from across the layout, where the operators are typically standing.</span></p>
<p></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:342.59px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:624.00px"><img alt="" src="img_cf53c7f85304da11ad968321df649438f5918f6b3e4274aa6a5ab903e1b84b8fd.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p></p>
<p><span>Thus this new experimental signal is located on the pillar -- it’s facing the operators, and it’s high behind the window, hopefully high enough to be visible even when the public is present in front of the layout.</span></p>
<p></p>
<p><span>I kept the new signal as simple as possible: green indicates the turnout is aligned straight for the “inner” track (block B320) and red indicates it is thrown for the “outer track” (block B321). Behind the signal, I placed a short explanation to hopefully make it clear what the color represents:</span></p>
<p></p>
<table style="border-collapse:collapse;border-spacing:0;margin-left:auto;margin-right:auto">
 <tbody>
  <tr style="height:0pt">
   <td colspan="1" rowspan="1" style="border-bottom-color:rgb(0, 0, 0);border-bottom-style:solid;border-bottom-width:0pt;border-left-color:rgb(0, 0, 0);border-left-style:solid;border-left-width:0pt;border-right-color:rgb(0, 0, 0);border-right-style:solid;border-right-width:0pt;border-top-color:rgb(0, 0, 0);border-top-style:solid;border-top-width:0pt;vertical-align:middle;width:298.8pt"><p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:240.00px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:396.00px"><img alt="" src="img_79c196b7dca280b7ae02da40991a05ea9b6277925a3ce5c5dc6dd6b2bf253bbdi.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p></td>
   <td colspan="1" rowspan="1" style="border-bottom-color:rgb(0, 0, 0);border-bottom-style:solid;border-bottom-width:0pt;border-left-color:rgb(0, 0, 0);border-left-style:solid;border-left-width:0pt;border-right-color:rgb(0, 0, 0);border-right-style:solid;border-right-width:0pt;border-top-color:rgb(0, 0, 0);border-top-style:solid;border-top-width:0pt;vertical-align:middle;width:298.8pt"><p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:241.33px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:396.00px"><img alt="" src="img_163ba01bbabb938139972baf366c147804433809fb50f4d23b56071485fd427ai.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p></td>
  </tr>
 </tbody>
</table>
<p><span></span></p>

<a href="2025-03-20_indicator_for_turnout_t330.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2025-01-16_conductor_2_email_notificati_0ac70a31.html">
    <h2 class="post-title">2025-01-16 - Conductor 2: Email Notifications when the Automation Breaks</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    Rtac
    
    </span>
</span></div>

<p><span></span></p>
<p></p>
<p><span>Back in December I was </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/blog/train/2024-12-25_conductor_2_activated_block_handling.html" style="color:inherit;text-decoration:inherit">fighting with the spurious block activation of block B360</a></span><span>. This would break the automation, and I would have no real report about it. Of course I already have a custom web dashboard that shows me the status of the automation and </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/blog/train/2023-07-01_conductor_2_w_google_analytics_4.html" style="color:inherit;text-decoration:inherit">after-the-fact analytics</a></span><span>&nbsp;-- what kind of automation would that be without such dashboards? Still I figured having a “realtime” notification on failure would be better than periodically checking my custom dashboard.</span></p>
<p></p>
<p><span>I could add some email-sending capabilities to </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/rtac.html" style="color:inherit;text-decoration:inherit">Conductor 2</a></span><span>, but that’s something I’d rather not do as it’s a bit of its own rabbit hole. The </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.debian.org/" style="color:inherit;text-decoration:inherit">Debian Linux</a></span><span>&nbsp;computer running Conductor 2 has no email capabilities, and I intend to keep it that way -- I treat it as what it is, namely an unsecured box in a public museum with fairly loose access, thus it’s basically a DMZ. </span></p>
<p></p>
<p><span>Instead what I want is for the emails to be generated by some server that I control. All I need is to get the data to that server. I could piggyback the errors on the JSON used by the RTAC status server. That would almost be </span><span style="font-style:italic">too</span><span>&nbsp;logical. Or I could publish it on the MQTT broker and then proxy it over to the email server. Well, if I’m going that route, what about </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://wiki.debian.org/Rsyslog" style="color:inherit;text-decoration:inherit">RSyslog</a></span><span>?</span></p>
<p></p>
<p><span>So that’s what I did, and I get this kind of beautiful emails:</span></p>
<p></p>
<table style="border-collapse:collapse;border-spacing:0;margin-right:auto">
 <tbody>
  <tr style="height:0pt">
   <td colspan="1" rowspan="1" style="background-color:rgb(239, 239, 239);border-bottom-color:rgb(0, 0, 0);border-bottom-style:solid;border-bottom-width:1pt;border-left-color:rgb(0, 0, 0);border-left-style:solid;border-left-width:1pt;border-right-color:rgb(0, 0, 0);border-right-style:solid;border-right-width:1pt;border-top-color:rgb(0, 0, 0);border-top-style:solid;border-top-width:1pt;padding:5pt 5pt 5pt 5pt;vertical-align:top;width:597.6pt"><p style="text-align:left" class="console "><span style="color:rgb(102, 102, 102);font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">From: pi@alfray.com</span></p><p style="text-align:left" class="console "><span style="color:rgb(102, 102, 102);font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">To: self@alfray.com</span></p><p style="text-align:left" class="console "><span style="color:rgb(102, 102, 102);font-family:&quot;Consolas&quot;;font-size:9pt">Subject: </span><span style="font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">New Automation Error</span></p><p style="text-align:left" class="console "><span style="color:rgb(102, 102, 102);font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">Date: Wed, 08 Jan 2025 11:00:11 -0800</span></p><p style="text-align:left" class="console "><span style="color:rgb(102, 102, 102);font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">&nbsp;</span></p><p style="text-align:left" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">Jan &nbsp;8 11:00:01 consist fireman: </span></p><p style="text-align:left" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">&nbsp;CONSIST ERROR: </span></p><p style="text-align:left" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">&nbsp;10:57:38.342 R Sequence Branchline #3 Shuttle (0204) : ERROR Sequence Branchline #3 Shuttle (0204) current block &lt;BLYouBet [NS760]&gt; still occupied after 120.5 seconds. </span></p><p style="text-align:left" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">&nbsp;10:59:38.892 R Sequence Branchline #4 Recovery (0204) : ERROR Sequence Branchline #4 Recovery (0204) current block &lt;BLYouBet [NS760]&gt; still occupied after 120.0 seconds. </span></p></td>
  </tr>
 </tbody>
</table>
<p></p>
<p></p>
<p><span>Here’s how I implemented this:</span></p>
<p><span></span></p>

<a href="2025-01-16_conductor_2_email_notificati_0ac70a31.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2024-12-25_conductor_2_activated_block_handling.html">
    <h2 class="post-title">2024-12-25 - Conductor 2: Activated Block Handling</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    Rtac
    
    </span>
</span></div>

<p><span></span></p>
<p></p>
<p><span>These </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://github.com/model-railroad/conductor/commit/6f773e498a944fc4d840977e8383a00e79e324b5" style="color:inherit;text-decoration:inherit">two</a></span><span>&nbsp;</span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://github.com/model-railroad/conductor/commit/133cf7a2bd6ddaa1a68edd02f2d7f9923895ac17" style="color:inherit;text-decoration:inherit">commits</a></span><span>&nbsp;address the recent issue of </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/blog/train/2024-10-14_conductor_2_freight_starts_w_ce787171.html" style="color:inherit;text-decoration:inherit">spurious block activation breaking the automation</a></span><span>.</span></p>
<p></p>
<p><span>Recently a new sensor-related issue arose with block B360. Last time, it was because some track was </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/blog/train/2024-10-12_conductor_2_sensor_issues_on_483b2f5d.html" style="color:inherit;text-decoration:inherit">occupied somewhere else</a></span><span>&nbsp;on the layout. This time, the issue is different: the automated passenger train is going to Summit (the top of the mountain), where it stops and returns back down. It goes through these blocks:</span></p>
<p></p>
<p style="text-align:center"><span style="font-family:&quot;Roboto Mono&quot;;font-weight:700">B370</span><span>&nbsp;(Summit) → </span><span style="font-family:&quot;Roboto Mono&quot;;font-weight:700">B360</span><span>&nbsp;→ </span><span style="font-family:&quot;Roboto Mono&quot;;font-weight:700">B340</span><span>&nbsp;→ </span><span style="font-family:&quot;Roboto Mono&quot;;font-weight:700">B330</span><span>&nbsp;→ </span><span style="font-family:&quot;Roboto Mono&quot;;font-weight:700">B321</span><span>&nbsp;→ </span><span style="font-family:&quot;Roboto Mono&quot;;font-weight:700">B311</span><span>&nbsp;(Station)</span></p>
<p></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:1.33px solid #999999;display:inline-block;height:188.00px;margin:-0.00px -0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:796.80px"><img alt="" src="img_6a346d5d29deaaadc78aef01a9e0dff2b223776e40c9669bc6eb964092769e27i.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p></p>
<p><span>The new problem with block B360: after the train has left block B360 and entered block B340, block B360 should register as “empty”. After all, the train isn’t on the block anymore. But from time to time -- very rarely -- the block will keep staying on, sometimes as long as a minute and half! Now two adjacent blocks can be active at the same time -- that happens when a train crosses a block boundary. But once the train reaches block B330, it is an error for block B360 to still be active. </span></p>
<p></p>
<p><span>When that happens, the automation enters the error mode, stops the train, and tries to do a recovery. Interestingly as soon as the train stops, that “frees” block B360 too. Thus the recovery mechanism notices that only block B330 is active, deduces the train must be there, and brings it back home. From a viewer point of view, that all happens almost instantly so it’s hard to notice visually that something went wrong. But from a software perspective, it was all wrong for sure.</span></p>
<p><span></span></p>

<a href="2024-12-25_conductor_2_activated_block_handling.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2024-12-16_conductor_2_new_mqtt_support.html">
    <h2 class="post-title">2024-12-16 - Conductor 2: New MQTT Support</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    Rtac
    
    </span>
</span></div>

<p><span></span></p>
<p></p>
<p><span>There’s been a few changes in </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://github.com/model-railroad/conductor/commits/main/" style="color:inherit;text-decoration:inherit">Conductor 2 in the recent weeks</a></span><span>.</span></p>
<p></p>
<p><span>The first major change has been to add </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://mqtt.org/" style="color:inherit;text-decoration:inherit">MQTT</a></span><span>&nbsp;support. The custom script language now exposes an “mqtt” object. Once configured, one can publish </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://mosquitto.org/man/mqtt-7.html" style="color:inherit;text-decoration:inherit">MQTT topics/messages</a></span><span>. This is used to control the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://github.com/model-railroad/ambiance" style="color:inherit;text-decoration:inherit">Ambiance LED string display</a></span><span>. Here’s an example of usage in the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://github.com/model-railroad/conductor/blob/main/jmri/conductor/engine2k/src/main/resources/v2/script/script_v30.02_bl204%2Bml8312%2B1225%2Btl6885.conductor.kts" style="color:inherit;text-decoration:inherit">latest script</a></span><span>:</span></p>
<p></p>
<table style="border-collapse:collapse;border-spacing:0;margin-right:auto">
 <tbody>
  <tr style="height:0pt">
   <td colspan="1" rowspan="1" style="background-color:rgb(207, 226, 243);border-bottom-color:rgb(0, 0, 0);border-bottom-style:solid;border-bottom-width:1pt;border-left-color:rgb(0, 0, 0);border-left-style:solid;border-left-width:1pt;border-right-color:rgb(0, 0, 0);border-right-style:solid;border-right-width:1pt;border-top-color:rgb(0, 0, 0);border-top-style:solid;border-top-width:1pt;padding:5pt 5pt 5pt 5pt;vertical-align:top;width:597.6pt"><p style="text-align:left" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">mqtt.configure("~/bin/JMRI/rtac_mqtt_conf.json")</span></p><p style="text-align:left" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">&nbsp;</span></p><p style="text-align:left" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">mqtt.publish("ambiance/script/init", "Brightness 0.5 ; Fill #000000 1 ; SlowFill 0.1 #FF1000 40 #FF4000 10")</span></p><p style="text-align:left" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">mqtt.publish("ambiance/script/event", "Slide -0.05 100")</span></p><p style="text-align:left" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">&nbsp;</span></p><p style="text-align:left" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">var _ambiance_counter = 0</span></p><p style="text-align:left" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">fun Ambiance_Trigger() {</span></p><p style="text-align:left" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">&nbsp; &nbsp; mqtt.publish("ambiance/event/trigger", _ambiance_counter.toString())</span></p><p style="text-align:left" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">&nbsp; &nbsp; _ambiance_counter++</span></p><p style="text-align:left" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">}</span></p><p style="text-align:left" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">&nbsp;</span></p><p style="text-align:left" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">fun Ambiance_Off() {</span></p><p style="text-align:left" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">&nbsp; &nbsp; mqtt.publish("ambiance/script/init", "Brightness 0.5 ; SlowFill 0.25 #000000 1")</span></p><p style="text-align:left" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">}</span></p></td>
  </tr>
 </tbody>
</table>
<p><span></span></p>

<a href="2024-12-16_conductor_2_new_mqtt_support.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>





<div class="prev-next-container">

    <span class="prev-page"></span>
    <span class="next-page"><a href="0001.html">Older Posts ⇒</a><br/></span>


</div>

</div> <!-- container -->
</div> <!-- main -->

<div class="sharethis-inline-share-buttons"></div>

<div class="bottom-container">&nbsp;Generated on 2025-09-04 by Rig4j 0.1-Exp-05cc7b2&nbsp;</div>

</main>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-M1KDMEFC4D"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-M1KDMEFC4D');
</script>

</body>
</html>

