<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport"    content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author"      content="">

<link href="atom.xml" type="application/atom+xml" rel="alternate" title="Atom feed for Blog: Model Train-related Notes" />

<meta property="og:url"         content="https://www.alfray.com/trains/blog/train/2019-04-14_conductor_2_includes_routes__b779f39a.html" />
<meta property="og:type"        content="article" />
<meta property="og:title"       content="Conductor 2: Includes, Routes, and Profiles -- Revisited" />

<meta property="og:description" content="Routes, Profiles, or even the latter idea of Includes for Conductor 2&nbsp;are all vaguely unsatisfactory." />


<meta name="twitter:card"        content="summary" />
<!-- meta name="twitter:site"    content="@flickr" / -->
<meta name="twitter:title"       content="Conductor 2: Includes, Routes, and Profiles -- Revisited" />

<meta name="twitter:description" content="Routes, Profiles, or even the latter idea of Includes for Conductor 2&nbsp;are all vaguely unsatisfactory." />


<title>Blog: Model Train-related Notes</title>

<script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5c66171070e9220011ed1c61&product=inline-share-buttons" async="async"></script>

<!-- Custom styles for this template -->
<style type="text/css">
body {
    font-family: sans-serif;
    margin: 0;
}

.main {
    margin: 8px;
}

p, span {
    line-height: 1.2;
    text-align: justify;
}

p.console {
    margin: 0;
    padding: 0;
}

.container {
    max-width: 95%;
}

@media screen and (min-width: 600px) {
    .container {
        max-width: 60rem;
    }
}

.center-horiz {
    margin: auto;
}

.no-margin-container {
}

/* Header + Title */
.blog-header {
  margin-bottom: 3rem;
  background-color: #428bca;
  box-shadow: inset 0 -.1rem .25rem rgba(0,0,0,.1);
}


.banner-bg-image {
    height: 50px;
    background-image: url("header.jpg");
    background-position: center;
    background-size: 100% auto;
}

@media screen and (min-width: 600px) {
    .banner-bg-image {
        height: 200px;
    }
}


.title-container {
    color: #fff;
    padding: 1rem;
    line-height: 1.5;
    font-weight: 500;
    font-size: 24px;
    font-family: sans-serif;
}

.title-container a {
    color: #fff;
    text-decoration: none;
}

.post-container {
}

.bottom-container {
    margin-top: 8px;
    color: #fff;
    background-color: #428bca;
    font-family: sans-serif;
    text-align: center;
    font-size: small;
    line-height: 1rem;
}

@media screen and (min-width: 600px) {
    .bottom-container {
        font-size: x-small;
    }
}

.post-title-container {
    position: relative;
    background-color: #428bca;
    padding: 0.5rem;
}

.post-title {
    display: inline;
    color: #fff;
    font-weight: 500;
    font-family: sans-serif;
    font-size: 1.5em;
}

a.post-title-link {
    color: #fff;
    text-decoration: none;
}

.post-cat {
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    padding: 0.25rem;
    background-color: #d0e0e3;
    color: #000;
    font-weight: 500;
    font-family: sans-serif;
    font-size: 1.5em;
}

a.post-cat-link {
    color: #000;
    text-decoration: none;
}

.post-cat-label {
    display: block;
    text-align: right;
    color: #000;
    font-size: 0.4em;
}

.prev-next-container {
    overflow: auto;
}

.prev-page {
    float: left;
    line-height: 2em;
}

.next-page {
    float: right;
    line-height: 2em;
}

h1, h2, h3, h4, h5, h6 {
    font-family: sans-serif;
    font-weight: bold;
}

.text-hide {
    font: 0/0 a;
    color: transparent;
    text-shadow: none;
    background-color: transparent;
    border: 0;
}

td p {
    margin: 0;
}


</style>
</head>

<body>

<header class="blog-header">

    <div class="no-margin-container banner-bg-image text-hide">
        Site Banner Image
    </div>

    <div class="title-container">
        <a href="https://www.alfray.com/trains/">Ralf's Train Pages</a>
        
        /
        <a href="0006.html">Blog: Model Train-related Notes</a>
        
    </div>
</header>

<main role="main">
<div class="main">
<div class="container center-horiz">

<p><span> </span></p>
<p><span></span></p>
<p><span> </span></p>
<table style="border-collapse:collapse;border-spacing:0;margin-left:auto;margin-right:auto">
 <tbody>
  <tr style="height:0pt">
   <td colspan="1" rowspan="1" style="background-color:rgb(103, 78, 167);border-bottom-color:rgb(255, 255, 255);border-bottom-style:solid;border-bottom-width:1pt;border-left-color:rgb(255, 255, 255);border-left-style:solid;border-left-width:1pt;border-right-color:rgb(255, 255, 255);border-right-style:solid;border-right-width:1pt;border-top-color:rgb(255, 255, 255);border-top-style:solid;border-top-width:1pt;padding:7.2pt 7.2pt 7.2pt 7.2pt;vertical-align:top;width:119.5pt"><p style="text-align:center"><span style="-webkit-text-decoration-skip:none;color:rgb(255, 217, 102);font-size:14pt;font-weight:700;text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/index.html" style="color:inherit;text-decoration:inherit">Introduction</a></span></p></td>
   <td colspan="1" rowspan="1" style="background-color:rgb(103, 78, 167);border-bottom-color:rgb(255, 255, 255);border-bottom-style:solid;border-bottom-width:1pt;border-left-color:rgb(255, 255, 255);border-left-style:solid;border-left-width:1pt;border-right-color:rgb(255, 255, 255);border-right-style:solid;border-right-width:1pt;border-top-color:rgb(255, 255, 255);border-top-style:solid;border-top-width:1pt;padding:7.2pt 7.2pt 7.2pt 7.2pt;vertical-align:top;width:119.5pt"><p style="text-align:center"><span style="-webkit-text-decoration-skip:none;color:rgb(255, 217, 102);font-size:14pt;font-weight:700;text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/blog/randall/" style="color:inherit;text-decoration:inherit">Blog &amp; News</a></span></p></td>
   <td colspan="1" rowspan="1" style="background-color:rgb(103, 78, 167);border-bottom-color:rgb(255, 255, 255);border-bottom-style:solid;border-bottom-width:1pt;border-left-color:rgb(255, 255, 255);border-left-style:solid;border-left-width:1pt;border-right-color:rgb(255, 255, 255);border-right-style:solid;border-right-width:1pt;border-top-color:rgb(255, 255, 255);border-top-style:solid;border-top-width:1pt;padding:7.2pt 7.2pt 7.2pt 7.2pt;vertical-align:top;width:119.5pt"><p style="text-align:center"><span style="-webkit-text-decoration-skip:none;color:rgb(255, 217, 102);font-size:14pt;font-weight:700;text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/about.html" style="color:inherit;text-decoration:inherit">About the Model Railroad</a></span></p></td>
   <td colspan="1" rowspan="1" style="background-color:rgb(103, 78, 167);border-bottom-color:rgb(255, 255, 255);border-bottom-style:solid;border-bottom-width:1pt;border-left-color:rgb(255, 255, 255);border-left-style:solid;border-left-width:1pt;border-right-color:rgb(255, 255, 255);border-right-style:solid;border-right-width:1pt;border-top-color:rgb(255, 255, 255);border-top-style:solid;border-top-width:1pt;padding:7.2pt 7.2pt 7.2pt 7.2pt;vertical-align:top;width:119.5pt"><p style="text-align:center"><span style="-webkit-text-decoration-skip:none;color:rgb(255, 217, 102);font-size:14pt;font-weight:700;text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/rtac.html" style="color:inherit;text-decoration:inherit">RTAC Software</a></span></p></td>
   <td colspan="1" rowspan="1" style="background-color:rgb(103, 78, 167);border-bottom-color:rgb(255, 255, 255);border-bottom-style:solid;border-bottom-width:1pt;border-left-color:rgb(255, 255, 255);border-left-style:solid;border-left-width:1pt;border-right-color:rgb(255, 255, 255);border-right-style:solid;border-right-width:1pt;border-top-color:rgb(255, 255, 255);border-top-style:solid;border-top-width:1pt;padding:7.2pt 7.2pt 7.2pt 7.2pt;vertical-align:top;width:119.5pt"><p style="text-align:center"><span style="-webkit-text-decoration-skip:none;color:rgb(255, 217, 102);font-size:14pt;font-weight:700;text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/videos.html" style="color:inherit;text-decoration:inherit">Videos</a></span></p></td>
  </tr>
 </tbody>
</table>
<p></p>
<p><span style="font-style:italic">Model Train-related Notes Blog -- t</span><span style="font-style:italic">hese are personal notes and musings on the subject of model train control, automation, electronics, or whatever I find interesting. I also have more posts in a blog dedicated to the maintenance of the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);font-style:italic;text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/blog/randall/" style="color:inherit;text-decoration:inherit">Randall Museum Model Railroad</a></span><span style="font-style:italic">.</span></p>
<p><span></span></p>

<div class="prev-next-container">


    <span class="prev-page"><a href="2019-05-12_conductor_2_concept_of_route_117c560b.html">⇐ Newer Post</a><br/></span>
    <span class="next-page"><a href="2019-03-08_conductor_2_evaluating_languages.html">Older Post ⇒</a><br/></span>

</div>


    <div class="post-container">
    <div class="post-title-container"><h2 class="post-title">2019-04-14 - Conductor 2: Includes, Routes, and Profiles -- Revisited</h2>
    <span class="post-cat" title="Category">
            <span class="post-cat-label">Category</span>
            <span class="post-cat-text">Rtac</span>
    </span>
    </div>


    <p><span></span></p>
<p></p>
<p><span>Routes, Profiles, or even the latter idea of Includes for </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/rtac" style="color:inherit;text-decoration:inherit">Conductor 2</a></span><span>&nbsp;are all vaguely unsatisfactory.</span></p>
<p><span>Includes are just a hack in the current v1 script language which do not really solve anything.</span></p>
<p></p>
<p><span>The core issue is modularization of the script.</span></p>
<p></p>
<p><span>One concept I explored earlier in the 2018-12-08 post and that I still want are routes.</span></p>
<p></p>
<p><span>A route is a sequence of blocks and a reservation principle. They have different modes, e.g. global interlocking vs ABS window interlocking. I think this concept is good and should be kept as-is. </span></p>
<p style="text-align:left"><span></span></p>
<p></p>
<p><span>One difference with the original idea: in the earlier idea, routes worked with profiles. A profile is a train engine number + a number of parameters, and a route is an unconfigured program, which variables are provided by the profile. The idea was to reuse the same route programming with different trains/engines by simply swapping the profile affected to the route.</span></p>
<p></p>
<p><span>Although that’s nice in theory, I don’t see this applying properly to the automation at Randall. Not a single time was I able to update the automation by simply changing an engine number and not changing anything. Eventually I’d hoped to get there, but this hasn’t happened yet. A potential example is the main UP automation. We have 2 exact same engines so ideally we could swap them.</span></p>
<p></p>
<p><span>Another part of the idea was to expose only profiles (and not routes) to the UI on the tablet and give operators the ability to trivially change trains in the automation. Unfortunately I don’t have any such staff -- current staff would not have the proficiency to either be trusted to set up the train correctly or change the tablet settings or both.</span></p>
<p></p>
<p><span>I think there is some value to the profile idea but it may be more of a generic value, and should not be mandatory. Thus the proposition is to put aside the profile idea for now. It can always be re-introduced later if needed as an orthogonal feature. Note that such profiles can be simulated by having a function create duplicates of the same route for different engine numbers.</span></p>
<p></p>
<p><span>So now in the case of Randall, that gives me 3 routes: One Branchline (BL), and two Mainline (Passenger + Freight). The latter needs to alternate.</span></p>
<p></p>
<p><span>So now, let’s go back to includes. The idea behind includes is to modularize the ANTLR script. For example, right now when I want to change the branchline, I duplicate the whole script including the mainline, and get a new copy of everything. If I want to revert back to a previous branchline, I need to carefully diff two versions of the script to keep the last version of the mainline yet use the older version of the branchline. The current way works nicely as long as I only modify forward. Includes would make that easier by being able to swap e.g. bl-01 instead of bl-02 into a common “master” script. </span></p>
<p><span>On top of that, includes can be used to solve the “profile” idea on the mainline by e.g. being able to include freight-02 instead of freight-01 and not touch the passenger parts. Careful consideration is needed as these would be straight macro-level includes so order and global definitions matter.</span></p>
<p></p>
<p><span>The idea of having profiles in a DSL does not preclude the need for includes. The same kind of logistical issue arises: how do I want the end script to look like? As a monolithic block with all the “profiles / routes” options, or as a set of multi-file definitions? Right now the monolithic script does not offer any alternative per route. The goal would be to have at least one backup engine defined in the script and exchange them regularly. So that means having 6 profiles/routes definitions in the script. It may get large and tedious.</span></p>
<p></p>
<p><span>That being said, I’m deciding to ignore the issue upfront. If I want to add support for includes, I’m sure I can add it later. And maybe there’s a different solution for example using an import / module mechanism.</span></p>
<p></p>
<p><span>The other part of the include / route / profile setup was to have selection made on the tablet by “regular” layout operators. Right now I’m postponing this idea as it does not seem realistic. I simply have no operators with enough proficiency to be trusted to both setup the trains </span><span style="font-style:italic">and</span><span>&nbsp;set up the tablet. I have some who </span><span style="font-style:italic">claim</span><span>&nbsp;to have that proficiency yet have regularly demonstrated they clearly lack it -- for example how hard is it to remember to put 2 trains back on the </span><span style="font-style:italic">proper</span><span>&nbsp;track, and identify when the automation does not start because they didn’t put the right train on the right track. More than once. So no, not happening for now.</span></p>
<p></p>
<p><span>That means I’m going to:</span></p>
<ul style="margin:0">
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Ignore includes for now.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Ignore profiles for now.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>I will however define and implement routes as they are useful.</span></li>
</ul>
<p></p>
<hr>
<p></p>


    </div>



<div class="prev-next-container">


    <span class="prev-page"><a href="2019-05-12_conductor_2_concept_of_route_117c560b.html">⇐ Newer Post</a><br/></span>
    <span class="next-page"><a href="2019-03-08_conductor_2_evaluating_languages.html">Older Post ⇒</a><br/></span>

</div>

</div> <!-- container -->
</div> <!-- main -->

<div class="sharethis-inline-share-buttons"></div>

<div class="bottom-container">&nbsp;Generated on 2025-09-04 by Rig4j 0.1-Exp-05cc7b2&nbsp;</div>

</main>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-M1KDMEFC4D"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-M1KDMEFC4D');
</script>

</body>
</html>

