<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport"    content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author"      content="">

<link href="atom.xml" type="application/atom+xml" rel="alternate" title="Atom feed for Blog: Model Train-related Notes" />

<meta property="og:url"         content="https://www.alfray.com/trains/blog/train/0006.html" />
<meta property="og:type"        content="article" />

<meta property="og:title"       content="Blog: Model Train-related Notes" />
<meta property="og:description" content="Here’s an idealized turnout, showing the polarity of the frog based on whether the turnout is normal or reverse:" />
<meta property="og:image"       content="https://www.alfray.com/trains/blog/train/img_8c53fe3eb6100a667103f059ec865db63097a0b4312346cc3f9c86d4c7fc3f80d.png" />

<meta name="twitter:card"        content="summary" />
<!-- meta name="twitter:site"    content="@flickr" / -->

<meta name="twitter:title"       content="Blog: Model Train-related Notes" />
<meta name="twitter:description" content="Here’s an idealized turnout, showing the polarity of the frog based on whether the turnout is normal or reverse:" />
<meta name="twitter:image"       content="https://www.alfray.com/trains/blog/train/img_8c53fe3eb6100a667103f059ec865db63097a0b4312346cc3f9c86d4c7fc3f80d.png" />

<title>Blog: Model Train-related Notes</title>

<script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5c66171070e9220011ed1c61&product=inline-share-buttons" async="async"></script>

<!-- Custom styles for this template -->
<style type="text/css">
body {
    font-family: sans-serif;
    margin: 0;
}

.main {
    margin: 8px;
}

p, span {
    line-height: 1.2;
    text-align: justify;
}

p.console {
    margin: 0;
    padding: 0;
}

.container {
    max-width: 95%;
}

@media screen and (min-width: 600px) {
    .container {
        max-width: 60rem;
    }
}

.center-horiz {
    margin: auto;
}

.no-margin-container {
}

/* Header + Title */
.blog-header {
  margin-bottom: 3rem;
  background-color: #428bca;
  box-shadow: inset 0 -.1rem .25rem rgba(0,0,0,.1);
}


.banner-bg-image {
    height: 50px;
    background-image: url("header.jpg");
    background-position: center;
    background-size: 100% auto;
}

@media screen and (min-width: 600px) {
    .banner-bg-image {
        height: 200px;
    }
}


.title-container {
    color: #fff;
    padding: 1rem;
    line-height: 1.5;
    font-weight: 500;
    font-size: 24px;
    font-family: sans-serif;
}

.title-container a {
    color: #fff;
    text-decoration: none;
}

.post-container {
}

.bottom-container {
    margin-top: 8px;
    color: #fff;
    background-color: #428bca;
    font-family: sans-serif;
    text-align: center;
    font-size: small;
    line-height: 1rem;
}

@media screen and (min-width: 600px) {
    .bottom-container {
        font-size: x-small;
    }
}

.post-title-container {
    position: relative;
    background-color: #428bca;
    padding: 0.5rem;
}

.post-title {
    display: inline;
    color: #fff;
    font-weight: 500;
    font-family: sans-serif;
    font-size: 1.5em;
}

a.post-title-link {
    color: #fff;
    text-decoration: none;
}

.post-cat {
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    padding: 0.25rem;
    background-color: #d0e0e3;
    color: #000;
    font-weight: 500;
    font-family: sans-serif;
    font-size: 1.5em;
}

a.post-cat-link {
    color: #000;
    text-decoration: none;
}

.post-cat-label {
    display: block;
    text-align: right;
    color: #000;
    font-size: 0.4em;
}

.prev-next-container {
    overflow: auto;
}

.prev-page {
    float: left;
    line-height: 2em;
}

.next-page {
    float: right;
    line-height: 2em;
}

h1, h2, h3, h4, h5, h6 {
    font-family: sans-serif;
    font-weight: bold;
}

.text-hide {
    font: 0/0 a;
    color: transparent;
    text-shadow: none;
    background-color: transparent;
    border: 0;
}

td p {
    margin: 0;
}


</style>
</head>

<body>

<header class="blog-header">

    <div class="no-margin-container banner-bg-image text-hide">
        Site Banner Image
    </div>

    <div class="title-container">
        <a href="https://www.alfray.com/trains/">Ralf's Train Pages</a>
        
        /
        <a href="0006.html">Blog: Model Train-related Notes</a>
        
    </div>
</header>

<main role="main">
<div class="main">
<div class="container center-horiz">

<p><span> </span></p>
<p><span></span></p>
<p><span> </span></p>
<p><span style="font-style:italic">Model Train-related Notes Blog -- t</span><span style="font-style:italic">hese are personal notes and musings on the subject of model train control, automation, electronics, or whatever I find interesting. I also have more posts in a blog dedicated to the maintenance of the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);font-style:italic;text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/blog/randall/" style="color:inherit;text-decoration:inherit">Randall Museum Model Railroad</a></span><span style="font-style:italic">.</span></p>
<p><span></span></p>

<div class="prev-next-container">

    <span class="prev-page"><a href="0005.html">⇐ Newer Posts</a><br/></span>
    <span class="next-page"><a href="0007.html">Older Posts ⇒</a><br/></span>


</div>



    <div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2020-03-08_dwarf_signal_for_turnout.html">
    <h2 class="post-title">2020-03-08 - Dwarf Signal for Turnout</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    DCC
    
    </span>
</span></div>

<p><span></span></p>
<p><span>Here’s an idealized turnout, showing the polarity of the frog based on whether the turnout is normal or reverse:</span></p>
<p style="text-align:left"></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:157.00px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:537.00px"><img alt="" src="img_8c53fe3eb6100a667103f059ec865db63097a0b4312346cc3f9c86d4c7fc3f80d.png" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p></p>
<p><span>The frog is directly connected to rails A or B via the switch points of a slow-motion turnout motor, be it a Tortoise or a Fulgurex (in the case of the Randall layout). This works for any turnout which has a metal frog which polarity changes based on the turnout position. Examples are turnouts powered by a Tortoise or Fulgurex where the auxiliary contacts from the slow-motion motor are used to change the frog polarity. Another example are the EZ-Track turnouts with a metal frog.</span></p>
<p></p>
<p><span>We can directly wire two LEDs, green and red, with a resistance, to the frog and the A / B rails to get them illuminated to indicate the position of the turnout, as follows:</span></p>
<p><span></span></p>

<a href="2020-03-08_dwarf_signal_for_turnout.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2019-09-29_nce_aiu_and_nce_eb1_circuit_breakers.html">
    <h2 class="post-title">2019-09-29 - NCE AIU and NCE EB1 Circuit Breakers</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    NCE
    
    </span>
</span></div>

<p><span></span></p>
<p><span>One issue I have on the Randall layout is that operators or automation sometimes short the layout. Then the NCE EB1 circuit breakers take over and of course shut down their corresponding power district. Then operators or staff ask me why things do not work, yet a lot of them fail to check the circuit breakers to see if they are shorting.</span></p>
<p></p>
<p><span>One idea I had a while ago was to use an </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://ncedcc.zendesk.com/hc/en-us/articles/200933435-Auxilliary-Input-Unit-AIU01-" style="color:inherit;text-decoration:inherit">NCE AIU01</a></span><span>&nbsp;to monitor the NCE EB1 circuit breakers. Then I could feed that into my automation software and get reporting of actual shorts right on my status web page.</span></p>
<p></p>
<p><span>The proposed solution is to use dual-channel optocouplers to connect the EB1 LED output to the AIU inputs.</span></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:391.22px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:695.07px"><img alt="" src="img_057bb6f1d08fbc01e780b54ca5b71465ee00b1a7e8b5614f1b32daa06d3bd8b9d.png" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p><span>Here are the details, as updated on 2020-02-04:</span></p>
<p><span></span></p>

<a href="2019-09-29_nce_aiu_and_nce_eb1_circuit_breakers.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2019-09-21_searchlight_car_conversion_to_led.html">
    <h2 class="post-title">2019-09-21 - Searchlight Car conversion to LED</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    
    <a class="post-cat-link" href="../../blog/train" title="View All Category Posts">Train</a>
    </span>
</span></div>

<p></p>
<p><span>I’ve just finished this project:</span></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:260.00px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:752.00px"><img alt="" src="img_c50ac682d90e046962cfd50725db0cfe80092cafcacb7a39ee67e00a8efe1afai.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p></p>
<p><span>The car itself is a Model Power HO Scale “Safety First #624 Searchlight”. It’s a depressed flat car with a nice &amp; sturdy die cast metal construction. It’s really well done. </span></p>
<p></p>
<p><span>Jim got it for Randall and when we tried to use it, somehow trains started crawling when pulling the car.</span></p>
<p><span></span></p>

<a href="2019-09-21_searchlight_car_conversion_to_led.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2019-06-22_conductor_2_automatic_route__63607e80.html">
    <h2 class="post-title">2019-06-22 - Conductor 2: Automatic Route Speeds & Per-Route Rules Scoping</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    Rtac
    
    </span>
</span></div>

<p><span></span></p>
<p></p>
<p><span>One of the goals of </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/rtac" style="color:inherit;text-decoration:inherit">Conductor 2</a></span><span>&nbsp;is to codify and simplify some rules which are explicitly coded in the script for Conductor 1.</span></p>
<p></p>
<p><span>One such thing is the handling of train speeds along a route.</span></p>
<p><span>Most speed changes in the current V1 script can be codified as the following:</span></p>
<ul style="margin:0">
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Speed change when </span><span style="font-style:italic">entering</span><span>&nbsp;a block.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Speed change within a block (with a delay).</span></li>
</ul>
<p></p>
<p><span>A lot of the rules have extra conditions to make them happen only for a given route, and a specific direction.</span></p>
<p></p>
<p><span>Both combined gives us some explosive combination numbers: if this route is active, in this direction, and in this block, then set the train speed to such. </span></p>
<p></p>
<p><span>I have 2 suggestions.</span></p>
<p style="text-align:left"><span></span></p>

<a href="2019-06-22_conductor_2_automatic_route__63607e80.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2019-06-20_conductor_2_simulations_expe_dfd12b83.html">
    <h2 class="post-title">2019-06-20 - Conductor 2: Simulations & Expectations for Occupancy</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    Rtac
    
    </span>
</span></div>

<p><span></span></p>
<p></p>
<p><span>Starting to implement the occupancy manager in </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/rtac" style="color:inherit;text-decoration:inherit">Conductor 2</a></span><span>&nbsp;immediately showed an issue in the default route mapping: the default idle block of one route cannot be part of another route.</span></p>
<p></p>
<p><span>So let’s backup and analyze this.</span></p>
<p style="text-align:left"><span></span></p>

<a href="2019-06-20_conductor_2_simulations_expe_dfd12b83.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2019-06-15_cotton_belt_9389.html">
    <h2 class="post-title">2019-06-15 - Cotton Belt 9389</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    
    <a class="post-cat-link" href="../../blog/train" title="View All Category Posts">Train</a>
    </span>
</span></div>

<p><span>Jim gave me this engine, with the sole purpose of changing the horn. How hard can it be?</span></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:272.00px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:770.00px"><img alt="" src="img_10caf3037ed1c1b6daf6a902fe2389d46e9407c71453a5a2f724b39c399799b0i.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p><span></span></p>

<a href="2019-06-15_cotton_belt_9389.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2019-06-03_jupiter_steam_4-4-0_engine.html">
    <h2 class="post-title">2019-06-03 - Jupiter Steam 4-4-0 Engine</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    
    <a class="post-cat-link" href="../../blog/train" title="View All Category Posts">Train</a>
    </span>
</span></div>

<p><span>Jim got this engine for Randall in commemoration of the 150th Anniversary of the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://en.wikipedia.org/wiki/First_Transcontinental_Railroad" style="color:inherit;text-decoration:inherit">Transcontinental Railroad</a></span><span>. </span></p>
<p></p>
<p style="text-align:center"><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><iframe width="560" height="315" src="https://www.youtube.com/embed/5zgsYMEsdCo" frameborder="0" allowfullscreen></iframe></span></p>
<p></p>
<p><span>My first attempts at doing that video were miserable as the engine would stop constantly at slow speed and I tried a few things to see if I could improve the power pickup.</span></p>
<p><span></span></p>

<a href="2019-06-03_jupiter_steam_4-4-0_engine.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2019-05-12_conductor_2_concept_of_route_117c560b.html">
    <h2 class="post-title">2019-05-12 - Conductor 2: Concept of Routes & Virtual Blocks</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    Rtac
    
    </span>
</span></div>

<p><span></span></p>
<p></p>
<p><span>One of the main concepts to be added in </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/rtac" style="color:inherit;text-decoration:inherit">Conductor 2</a></span><span>&nbsp;is the concept of routes.</span></p>
<p></p>
<p><span>Conductor 1 already has “route” definitions. These are actually intended for display on the remote tablets. A route is defined using:</span></p>
<ul style="margin:0">
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>A name,</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>A DCC throttle object, used to display the engine speed and direction;</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>The JMRI sensor used for the automation toggle on/off.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>A counter of number of times the automation started (incremented by the script).</span></li>
</ul>
<p></p>
<p><span>The counter thing was a quick attempt at gathering some stats initially and never used -- it’s technically displayed by RTAC on the tablet, but the UI layout was designed for 2 routes, and with the current 3 routes the counter is ironically not visible. Even when it was visible, nobody was looking at it. Thus I suggest dropping it eventually, which will remove a couple lines from the script.</span></p>
<p></p>
<p><span>The concept of routes in Conductor 2 is supposed to be more elaborate. However I’d posit it can just be an extension of what is in Conductor 1 </span><span style="font-style:italic">at the syntax level</span><span>&nbsp;in the script.</span></p>
<p></p>
<p><span>So what properties would I want in a Conductor 2 route?</span></p>
<p style="text-align:left"><span></span></p>

<a href="2019-05-12_conductor_2_concept_of_route_117c560b.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2019-04-14_conductor_2_includes_routes__b779f39a.html">
    <h2 class="post-title">2019-04-14 - Conductor 2: Includes, Routes, and Profiles -- Revisited</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    Rtac
    
    </span>
</span></div>

<p><span></span></p>
<p></p>
<p><span>Routes, Profiles, or even the latter idea of Includes for </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/rtac" style="color:inherit;text-decoration:inherit">Conductor 2</a></span><span>&nbsp;are all vaguely unsatisfactory.</span></p>
<p><span>Includes are just a hack in the current v1 script language which do not really solve anything.</span></p>
<p></p>
<p><span>The core issue is modularization of the script.</span></p>
<p></p>
<p><span>One concept I explored earlier in the 2018-12-08 post and that I still want are routes.</span></p>
<p></p>
<p><span>A route is a sequence of blocks and a reservation principle. They have different modes, e.g. global interlocking vs ABS window interlocking. I think this concept is good and should be kept as-is. </span></p>
<p style="text-align:left"><span></span></p>

<a href="2019-04-14_conductor_2_includes_routes__b779f39a.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2019-03-08_conductor_2_evaluating_languages.html">
    <h2 class="post-title">2019-03-08 - Conductor 2: Evaluating Languages</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    Rtac
    
    </span>
</span></div>

<p><span></span></p>
<p></p>
<p><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/rtac" style="color:inherit;text-decoration:inherit">Conductor 1</a></span><span>&nbsp;uses a custom language implemented using ANTLR 4. The goal for </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/rtac" style="color:inherit;text-decoration:inherit">Conductor 2</a></span><span>&nbsp;is to reuse an existing scripting engine. </span></p>
<p></p>
<p><span>Continuing with this, recently I started looking more closely at Lua to see if it could be a potential configuration language.</span></p>
<p><span></span></p>

<a href="2019-03-08_conductor_2_evaluating_languages.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>





<div class="prev-next-container">

    <span class="prev-page"><a href="0005.html">⇐ Newer Posts</a><br/></span>
    <span class="next-page"><a href="0007.html">Older Posts ⇒</a><br/></span>


</div>

</div> <!-- container -->
</div> <!-- main -->

<div class="sharethis-inline-share-buttons"></div>

<div class="bottom-container">&nbsp;Generated on 2025-09-01 by Rig4j 0.1-Exp-0c45755&nbsp;</div>

</main>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-M1KDMEFC4D"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-M1KDMEFC4D');
</script>

</body>
</html>

