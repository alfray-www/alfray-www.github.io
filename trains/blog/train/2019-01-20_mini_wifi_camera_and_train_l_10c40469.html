<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport"    content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author"      content="">

<link href="atom.xml" type="application/atom+xml" rel="alternate" title="Atom feed for Blog: Model Train-related Notes" />

<meta property="og:url"         content="https://www.alfray.com/trains/blog/train/2019-01-20_mini_wifi_camera_and_train_l_10c40469.html" />
<meta property="og:type"        content="article" />
<meta property="og:title"       content="Mini Wifi Camera and Train Layout Usage" />

<meta property="og:description" content="I’m continuing my exploration of what we can do using these cheap small mini cameras when it comes to train layouts, and today’s subject is this mini pinhole wifi camera. How well does it work and what can we use it for?" />
<meta property="og:image"       content="https://www.alfray.com/trains/blog/train/img_dab60ad84037b333addc1bbde4006f31ca9308c9ad8e9020b25f7de7d3807f6ai.jpg" />

<meta name="twitter:card"        content="summary" />
<!-- meta name="twitter:site"    content="@flickr" / -->
<meta name="twitter:title"       content="Mini Wifi Camera and Train Layout Usage" />

<meta name="twitter:description" content="I’m continuing my exploration of what we can do using these cheap small mini cameras when it comes to train layouts, and today’s subject is this mini pinhole wifi camera. How well does it work and what can we use it for?" />
<meta name="twitter:image"       content="https://www.alfray.com/trains/blog/train/img_dab60ad84037b333addc1bbde4006f31ca9308c9ad8e9020b25f7de7d3807f6ai.jpg" />

<title>Blog: Model Train-related Notes</title>

<script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5c66171070e9220011ed1c61&product=inline-share-buttons" async="async"></script>

<!-- Custom styles for this template -->
<style type="text/css">
body {
    font-family: sans-serif;
    margin: 0;
}

.main {
    margin: 8px;
}

p, span {
    line-height: 1.2;
    text-align: justify;
}

p.console {
    margin: 0;
    padding: 0;
}

.container {
    max-width: 95%;
}

@media screen and (min-width: 600px) {
    .container {
        max-width: 60rem;
    }
}

.center-horiz {
    margin: auto;
}

.no-margin-container {
}

/* Header + Title */
.blog-header {
  margin-bottom: 3rem;
  background-color: #428bca;
  box-shadow: inset 0 -.1rem .25rem rgba(0,0,0,.1);
}


.banner-bg-image {
    height: 50px;
    background-image: url("header.jpg");
    background-position: center;
    background-size: 100% auto;
}

@media screen and (min-width: 600px) {
    .banner-bg-image {
        height: 200px;
    }
}


.title-container {
    color: #fff;
    padding: 1rem;
    line-height: 1.5;
    font-weight: 500;
    font-size: 24px;
    font-family: sans-serif;
}

.title-container a {
    color: #fff;
    text-decoration: none;
}

.post-container {
}

.bottom-container {
    margin-top: 8px;
    color: #fff;
    background-color: #428bca;
    font-family: sans-serif;
    text-align: center;
    font-size: small;
    line-height: 1rem;
}

@media screen and (min-width: 600px) {
    .bottom-container {
        font-size: x-small;
    }
}

.post-title-container {
    position: relative;
    background-color: #428bca;
    padding: 0.5rem;
}

.post-title {
    display: inline;
    color: #fff;
    font-weight: 500;
    font-family: sans-serif;
    font-size: 1.5em;
}

a.post-title-link {
    color: #fff;
    text-decoration: none;
}

.post-cat {
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    padding: 0.25rem;
    background-color: #d0e0e3;
    color: #000;
    font-weight: 500;
    font-family: sans-serif;
    font-size: 1.5em;
}

a.post-cat-link {
    color: #000;
    text-decoration: none;
}

.post-cat-label {
    display: block;
    text-align: right;
    color: #000;
    font-size: 0.4em;
}

.prev-next-container {
    overflow: auto;
}

.prev-page {
    float: left;
    line-height: 2em;
}

.next-page {
    float: right;
    line-height: 2em;
}

h1, h2, h3, h4, h5, h6 {
    font-family: sans-serif;
    font-weight: bold;
}

.text-hide {
    font: 0/0 a;
    color: transparent;
    text-shadow: none;
    background-color: transparent;
    border: 0;
}

td p {
    margin: 0;
}


</style>
</head>

<body>

<header class="blog-header">

    <div class="no-margin-container banner-bg-image text-hide">
        Site Banner Image
    </div>

    <div class="title-container">
        <a href="https://www.alfray.com/trains/">Ralf's Train Pages</a>
        
        /
        <a href="0007.html">Blog: Model Train-related Notes</a>
        
    </div>
</header>

<main role="main">
<div class="main">
<div class="container center-horiz">

<p><span> </span></p>
<p><span></span></p>
<p><span> </span></p>
<p><span style="font-style:italic">Model Train-related Notes Blog -- t</span><span style="font-style:italic">hese are personal notes and musings on the subject of model train control, automation, electronics, or whatever I find interesting. I also have more posts in a blog dedicated to the maintenance of the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);font-style:italic;text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/blog/randall/" style="color:inherit;text-decoration:inherit">Randall Museum Model Railroad</a></span><span style="font-style:italic">.</span></p>
<p><span></span></p>

<div class="prev-next-container">


    <span class="prev-page"><a href="2019-01-26_conductor_2_routes_profiles.html">⇐ Newer Post</a><br/></span>
    <span class="next-page"><a href="2018-12-14_conductor_2_route_events_programming.html">Older Post ⇒</a><br/></span>

</div>


    <div class="post-container">
    <div class="post-title-container"><h2 class="post-title">2019-01-20 - Mini Wifi Camera and Train Layout Usage</h2>
    <span class="post-cat" title="Category">
            <span class="post-cat-label">Category</span>
            <span class="post-cat-text">Video</span>
    </span>
    </div>


    <p><span></span></p>
<p></p>
<p><span>I’m continuing my exploration of what we can do using these cheap small mini cameras when it comes to train layouts, and today’s subject is this </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://amzn.to/2RWZ7uZ" style="color:inherit;text-decoration:inherit">mini pinhole wifi camera</a></span><span>. How well does it work and what can we use it for?</span></p>
<p></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:361.33px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:796.80px"><img alt="" src="img_dab60ad84037b333addc1bbde4006f31ca9308c9ad8e9020b25f7de7d3807f6ai.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span><span><br>Mini pinhole camera compared to an HO-sized gondola</span></p>
<p><span></span></p>
<p></p>
<p><span>First of all, let’s describe the </span><span style="font-style:italic">generic</span><span>&nbsp;type of cameras we are talking about as there are a few variations available:</span></p>
<ul style="margin:0">
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>The camera itself is of a pinhole type, mounted on a ribbon connector, typically 3 inches long or so.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>The body with the electronics comes either in a box (as shown above) or in a heat-shrink tube-wrap.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>These have wifi and a separate good-sized antenna.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>These typically come with a battery, most of the time external, or sometimes combined with the electronics.</span></li>
</ul>
<p></p>
<p><span>If you search on Amazon, eBay, or AliExpress, a good search term is “mini pinhole wifi camera DIY” or similar. Be ready for some typical sleazy copy-paste marketing tactics and keyword bait titles. The imagery associated with them is of the most boring cliché type, and since all these vendors just copy-paste the same marketing material and specs, one has to look behind that to discern the </span><span style="font-style:italic">actual</span><span>&nbsp;specifications.</span></p>
<p></p>
<p><span>What are they good for, at least on the paper, allegedly?</span></p>
<p></p>
<p><span>For that we need goals to compare to. The usages I have in mind are:</span></p>
<ul style="margin:0">
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Creating a custom HO-sized camera car with a wifi live view.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Monitoring hidden staging yards or hidden tracks.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="http://ralf.alfray.com/trains/blog/train/2018-10-01_cameras_opencv_and_occupancy_d4e79a5c.html" style="color:inherit;text-decoration:inherit">Virtual block occupancy</a></span><span>&nbsp;using vision-based computer control (see </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="http://ralf.alfray.com/trains/blog/train/2018-10-01_cameras_opencv_and_occupancy_d4e79a5c.html" style="color:inherit;text-decoration:inherit">previous post here</a></span><span>).</span></li>
</ul>
<p></p>
<p><span>I looked at several of these and noticed a pattern:</span></p>
<ul style="margin:0">
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>A lot of these are based on “off-the-shelf“ chipsets typically used also in car dash-cams. A lot of that stuff is 5-yr old or more.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>It’s really hard to get the exact chipset spec in the vendor listings, so one needs to carefully read along the lines.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>The specs are wildly “inflated” in the vendor listings.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Most come with a battery that is mostly pointless for the usage I have in mind.</span></li>
</ul>
<p></p>
<p><span>I’ll base my explanations on this model I got off Amazon </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://amzn.to/2RWZ7uZ" style="color:inherit;text-decoration:inherit">https://amzn.to/2RWZ7uZ</a></span><span>&nbsp;because that’s what I got, and you can extrapolate to other models. First let’s look what’s inside the box:</span></p>
<p></p>
<table style="border-collapse:collapse;border-spacing:0;margin-left:auto;margin-right:auto">
 <tbody>
  <tr style="height:0pt">
   <td colspan="1" rowspan="1" style="border-bottom-color:rgb(0, 0, 0);border-bottom-style:solid;border-bottom-width:0pt;border-left-color:rgb(0, 0, 0);border-left-style:solid;border-left-width:0pt;border-right-color:rgb(0, 0, 0);border-right-style:solid;border-right-width:0pt;border-top-color:rgb(0, 0, 0);border-top-style:solid;border-top-width:0pt;vertical-align:middle;width:298.8pt"><p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:161.33px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:396.00px"><img alt="" src="img_fd6c0d0487acc2ae917835d5b6dfa1ca69ca1203c6394bb1dd3590d1cb0e6780i.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p></td>
   <td colspan="1" rowspan="1" style="border-bottom-color:rgb(0, 0, 0);border-bottom-style:solid;border-bottom-width:0pt;border-left-color:rgb(0, 0, 0);border-left-style:solid;border-left-width:0pt;border-right-color:rgb(0, 0, 0);border-right-style:solid;border-right-width:0pt;border-top-color:rgb(0, 0, 0);border-top-style:solid;border-top-width:0pt;vertical-align:middle;width:298.8pt"><p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:166.67px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:396.00px"><img alt="" src="img_ab85a4a8379da0deb8b01e57b8fd1cf273ce1508a2b977fe3fd676e56325c6abi.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p></td>
  </tr>
 </tbody>
</table>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:368.00px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:796.80px"><img alt="" src="img_e5c95bfa57a3805c4695d78c45b326dae655c59a88b650482c4e140947632e55i.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p></p>
<p><span>Under the hood, we have:</span></p>
<ul style="margin:0">
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>IP Camera SoC (Hi 3518). The </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://cdn.hackaday.io/files/19356828127104/Hi3518%20DataSheet.pdf" style="color:inherit;text-decoration:inherit">Hi 3518 SoC</a></span><span>&nbsp;can handle 720p @ 30 Hz and their SDK uses Linux 3.0.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>802.11 b/g/n single chip (</span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="http://www.datasheetcafe.com/mt7601u-datasheet-wifi-single-chip-mediatek/" style="color:inherit;text-decoration:inherit">MediaTek MT7601UN</a></span><span>).</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>64Mbit SPI Serial Flash memory (</span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.winbond.com/resource-files/w25q64fw_revd_032513.pdf" style="color:inherit;text-decoration:inherit">Winbond 25Q64</a></span><span>).</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Power goes through a 4.1V voltage regulator (</span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="http://www.alldatasheet.com/view.jsp?Searchword=XC6103D441MR" style="color:inherit;text-decoration:inherit">2KAX</a></span><span>).</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>The internal battery connection is labeled as +5V.</span></li>
</ul>
<p></p>
<p><span>The battery provided is a 3000 mAh, </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://amzn.to/2T3pf4U" style="color:inherit;text-decoration:inherit">similar in size to this one</a></span><span>.</span></p>
<p></p>
<p><span style="-webkit-text-decoration-skip:none;font-weight:700;text-decoration:underline;text-decoration-skip-ink:none">Mode of Operation</span></p>
<p><span>This is an area where I was pleasantly surprised: the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://amzn.to/2RWZ7uZ" style="color:inherit;text-decoration:inherit">https://amzn.to/2RWZ7uZ</a></span><span>&nbsp;is actually an IP Camera.</span></p>
<p></p>
<p><span>The default mode of operation is for it to create an ad-hoc wifi network. The documentation points to the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://play.google.com/store/apps/details?id=com.g_zhang.HDMiniCam" style="color:inherit;text-decoration:inherit">HDMiniCam</a></span><span>&nbsp;android app for Android (there’s a similar app for iPhones and I did not try it). Usage in this mode is fairly straightforward:</span></p>
<ul style="margin:0">
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Turn on the camera. It takes about 55 seconds to boot &amp; be available.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Select the custom wifi network created by the camera on the Android phone.</span></li>
 <ul>
  <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Android tip: A few seconds later Android will notify this wifi access point does not have internet access. Click on the “stay connected” checkbox, otherwise Android will try to switch wifi networks.</span></li>
 </ul>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>The Android app should be able to connect to the camera, configure settings, and go in live view mode.</span></li>
</ul>
<p></p>
<p><span>In the ad-hoc mode, the camera is creating the wifi network. I’ve had good connection success for at least 4-5 meters (~16 feet) in straight line of sight, and connection became spotty after that.</span></p>
<p></p>
<p><span>So far, that limits usage to the cell phone app, which is not what I’m looking for.</span></p>
<p><span>But here’s the nice thing: in the settings, have the camera connect to your own 2.4 GHz wifi network (it does not support 5 GHz networks).</span></p>
<p></p>
<p><span>Once the camera is connected to an existing wifi network, it works as a regular IP camera. The actual IP can be found using the app settings or the usual methods (check your wifi router, nmap the network, etc.) Once the IP address is known, it’s possible to use the camera using a web browser or even using VLC according to the brochure. More on this below.</span></p>
<p></p>
<p><span>The camera also supports P2P through typical external servers. That feature can be disabled in the IP cam settings, which I highly recommend one to do right away.</span></p>
<p></p>
<p><span>Note that all of this is clearly indicated in the small brochure that comes with it, if you know how to read it.</span></p>
<p></p>
<p><span style="-webkit-text-decoration-skip:none;font-weight:700;text-decoration:underline;text-decoration-skip-ink:none">Battery &amp; Power</span></p>
<p><span>The model I got came with a </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://amzn.to/2T3pf4U" style="color:inherit;text-decoration:inherit">fairly good-sized 3000 mAh battery</a></span><span>, which is unfortunately quite unusable for any need I have and represents a good portion of the overall cost.</span></p>
<p></p>
<p><span>When using it as an HO-sized camera car, the battery provided is too big; however it would be trivial to swap it for a smaller sized model that fits on a HO-sized car. The case also accepts a mini USB connector to charge the camera. My goal is to get power off the rails, and feed it to a bridge rectifier / 5V voltage regulator and then be able to power the camera from the rail power. Instead of a battery, it would be better to use a large capacitor to maintain current.</span></p>
<p></p>
<p><span>When using it as a yard monitor or for block occupancy, I want the camera to actually turn on with the layout and shut off at the same time. So that’s fine -- just don’t use the battery, but unfortunately I haven’t found a single model sold without one, and it’s a significant part of the price. That said this particular camera works for that purpose as there’s a “fixed” on/off sliding button. When the power button is set to on, the camera just turns on when it gets power; it takes about 53 seconds to boot after what it starts transmitting (or the jpeg can be pulled off, as explained below). So it’s suitable for this purpose. (Other cameras such as the SQ08 / SQ11 / SQ12 / SQ13 / SQ23 series have a push-button to turn them on and another push-button to start recording, and these are not suitable for an always-on power mode).</span></p>
<p></p>
<p><span style="-webkit-text-decoration-skip:none;font-weight:700;text-decoration:underline;text-decoration-skip-ink:none">Video Access &amp; Quality</span></p>
<p><span>Sadly that’s where these cameras are all disappointing. Remember how the SQ11 is sold as a “1080p camera (720p optional)” (sic) when it’s actually a 720p only camera that can do upscaling to 1080p (with noticeable artifacts to boot)? Well here we have the same thing.</span></p>
<p></p>
<p><span>Here the main chipset, the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://cdn.hackaday.io/files/19356828127104/Hi3518%20DataSheet.pdf" style="color:inherit;text-decoration:inherit">Hi 3518 SoC</a></span><span>,</span><span>&nbsp;can handle 720p @ 30 Hz. There’s no mention of 1080p support for that chipset that I know of. For a chipset from 2013, that’s not surprising.</span></p>
<p></p>
<p><span>Indoors image quality rated a “passable” in my book, fairly unsaturated, lacking any crispness, and all the colors seemed rather bland. That said, for an around-the-layout live view, or to monitor a yard, it should be good enough. You won’t be reading any engine or car numbers for sure, but you’d have enough to know where things are.</span></p>
<p></p>
<p><span>One thing to remember is that this camera does not have IR LEDs, and a quick test shows that the actual camera module probably has an IR filter lens as trying to IR-flood the scene did not result in anything useful. When it’s dark, this will record merely pitch black, nothing more, and trying my best to overcompensate the contrast/gamma/luminance after the fact resulted in absolutely nothing useful.</span></p>
<p></p>
<p><span>When using the camera in IP cam mode using a web browser, the only resolution available is 1280x720.</span></p>
<p></p>
<p><span>When using the android app, there are 4 resolutions available: 240p, 480p, 720p, and 1080p. The 2 first ones show some impressive clear lack of detail. Things become clearer at 720p and 1080p and honestly the only difference I could see between them is an </span><span style="font-style:italic">extremely</span><span>&nbsp;appalling low bitrate in the former case, and a somewhat less drastic bitrate in the better case but still quite obviously low. My guess is what changes is more the bitrate, and even the “best” choice is way below my expectations. Maybe that’s why the camera worked well at 5-6 meters away in ad-hoc mode… It’s the usual wireless conundrum: distance, speed, or bandwidth -- choose two.</span></p>
<p></p>
<p><span style="-webkit-text-decoration-skip:none;font-weight:700;text-decoration:underline;text-decoration-skip-ink:none">IP Cam &amp; Direct Web Access</span></p>
<p><span>Once the camera is connected to a wifi network, it is accessible via a web browser, giving access to a fairly typical IP cam web UI on the typical http port 80.</span></p>
<p></p>
<p><span>The web UI has a few modes: browse plugin, activex, iphone specific, regular MJPEG or regular jpeg pulling.</span></p>
<p></p>
<p><span>The “non-ie” web mode uses mjpeg and a classic asp+js to show the usual ip cam UI with PTZ controls and such. One need to remember a lot of functions are not available here (no PTZ, no IR) even though they are visible in the generic IP cam web page. This mode allows one to get into the camera settings using a typical ip cam config page. From there, all the settings can be configured (network, dhcp or fixed, wifi, user/password, p2p enabled, etc).</span></p>
<p></p>
<p><span>The “android mobile phone” web mode is a direct jpeg pull using the snapshot CGI URL and a simple JS to pull that jpeg every second. Brutal, simple, and works nicely.</span></p>
<p></p>
<p><span>The URLs available are:</span></p>
<ul style="margin:0">
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>http://ip/media/?action=snapshot -- Grab a 1280x720 JPEG, for example using wget, curl, etc.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>http://ip/video/livesp.asp</span><span>&nbsp;-- The stream may be an MJPEG stream but it didn’t look like the multipart I was expecting (x-mixed-replace). I didn’t spend too much time decoding it.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>http://ip/setting.asp</span><span>&nbsp;-- The web UI for settings.</span></li>
 <ul>
  <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>P2P can be disabled here</span></li>
  <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Network &gt; wifi &gt; “auto reboot camera when wifi disconnected”</span></li>
  <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>System &gt; Change Password &gt; can set an admin password, possibly change admin username too.</span></li>
 </ul>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>http://ip/reboot.asp -- Reboot the camera.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>The mode “Android browser that supports javascript” produces an asp page that does periodic snapshot refreshes with an index after snapshot, e.g. http://ip/media/?action=snapshot172</span></li>
</ul>
<p></p>
<p><span>Why do I care? Having direct access means:</span></p>
<ul style="margin:0">
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>The camera view can be used in other apps such as TinyCam or IpCamViewer on Android.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Usage with any NVR such as ZoneMinder or Blue Iris.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>A direct view in a web browser via javascript.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Pulling jpeg images directly to process them with OpenCV or </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://github.com/model-railroad/layout-wifi" style="color:inherit;text-decoration:inherit">Translate</a></span><span>.</span></li>
</ul>
<p></p>
<p><span>Where’s VLC? I wasn’t able to find a way to connect using VLC using the usual culprits (e.g. mjpeg over http) and I did not look further at this part.</span></p>
<p></p>
<p><span>Even when looking with Wireshark or reading the javascript of the web UI, I also wasn’t able to find anything that would look like an h264 stream endpoint (the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://cdn.hackaday.io/files/19356828127104/Hi3518%20DataSheet.pdf" style="color:inherit;text-decoration:inherit">Hi 3518 SoC</a></span><span>&nbsp;has an h264 encoder so I was hoping I could get such a stream). That said I wonder if the Android app isn’t actually using that; I didn’t bother looking that way too much, it’s an option to explore.</span></p>
<p></p>
<p></p>
<p><span style="-webkit-text-decoration-skip:none;font-weight:700;text-decoration:underline;text-decoration-skip-ink:none">Example of usage as a Live View Camera Car</span></p>
<p><span>This is one of my objectives, and this camera could very well work for that.</span></p>
<p></p>
<p><span>On the hardware side, my “proof of concept” looks something like this:</span></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:233.33px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:796.80px"><img alt="" src="img_8c4254bbd8cad6116ed743f9388f67cf345ddaf949bbc69d61c3adc43a523383i.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span><span><br>The mini cam in an HO-size gondola</span></p>
<p></p>
<p><span>I did a quick test using a gondola car, although a boxcar may work better to hold &amp; hide the electronics. Having the camera on a flexible ribbon connector provides a lot more flexibility in mounting locations. The body for the electronics fits very well in there, as well as the antenna. </span></p>
<p></p>
<p><span>The only thing that did not fit was the provided battery, but another one could be substituted if desired.</span></p>
<p></p>
<p><span>However my design target is to not use a battery but instead use a large capacitor and get power directly from the track with a diode bridge and a voltage regulator.</span></p>
<p></p>
<p><span>The camera would be configured to use an existing wifi network instead of the ad-hoc mode (which I’d expect to consume more power), allowing for a better range on a large layout. </span></p>
<p></p>
<p><span>On the software / receiver side, the goal is to have a monitor or a display for the public or layout operators. Any small linux computer would work: </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://amzn.to/2CBoCs8" style="color:inherit;text-decoration:inherit">Raspberry Pi 3</a></span><span>, </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://amzn.to/2Cx7dku" style="color:inherit;text-decoration:inherit">BeagleBone</a></span><span>, or even simply an </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="http://amzn.to/2DnbaYe" style="color:inherit;text-decoration:inherit">Intel Compute Stick</a></span><span>&nbsp;like </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="http://ralf.alfray.com/trains/blog/train/2018-01-21_turnouts_touch_panel_for_jmri_at_cmrs.html" style="color:inherit;text-decoration:inherit">I have used earlier</a></span><span>. These devices boot Linux and it is fairly trivial to make them autostart into Chromium in Kiosk mode (i.e. full screen) with a bit of javascript to pull the JPEG stream from the camera and display it. The </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="http://amzn.to/2DnbaYe" style="color:inherit;text-decoration:inherit">Intel Compute Stick</a></span><span>&nbsp;with its integrated wifi, convenient boxed format, and already configured Linux distro was by far the easiest to use out of the box (</span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="http://ralf.alfray.com/trains/blog/train/2018-01-21_turnouts_touch_panel_for_jmri_at_cmrs.html#h.vyqld4w7clca" style="color:inherit;text-decoration:inherit">example of chromium kiosk mode here</a></span><span>). If the sound of Linux makes you run away and evokes complexity to you, there’s a </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://amzn.to/2sExqJq" style="color:inherit;text-decoration:inherit">Windows 10 version of the same Intel Compute Stick</a></span><span>, more expensive and with better specs just to be able to boot Windows and allow your visitors to see at which frequency mandatory Windows updates are required, a problem that does not even exist on the Linux side.</span></p>
<p></p>
<p><span style="-webkit-text-decoration-skip:none;font-weight:700;text-decoration:underline;text-decoration-skip-ink:none">Form Factor and Other Usages </span></p>
<p><span>Compared to other types of cameras I’ve played with, I end up liking the “pinhole ribbon” style. In this case we have a fairly small camera module (about a quarter inch in size) and about 3-4 inches of ribbon. I realized this would be very convenient to be able to put cameras on the layout as part of the scenery. For example place the camera in a building, and then place the electronics body under the layout, getting power from any nearby power bus.</span></p>
<p></p>
<p><span>In a place like the Randall layout, a few of these could be mounted at different places such the top of the mountain or the places far from the visitors, providing them better views. Then a computer with a display, as previously mentioned, could just display the various cameras either in sequence or when motion is detected.</span></p>
<p></p>
<p><span>That said, even for that usage I would still want a slightly better video quality and a bit more saturation and better colors.</span></p>
<p></p>
<p><span style="-webkit-text-decoration-skip:none;font-weight:700;text-decoration:underline;text-decoration-skip-ink:none">Conclusion</span></p>
<p><span>All-in-all, that’s a fairly capable camera if one can accept a 720p image of passable quality at best. This is not suitable to make high quality 4K or even 1080p videos on youtube, but it’s definitely good enough for the other kind of usages I have in mind:</span></p>
<ul style="margin:0">
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Monitor remote yard / hidden staging (just be wary that these have poor low-light performance, but that can be easily fixed by adding a LED strip in the staging area to be monitored).</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Build a camera car for live view (just would like a slightly better video quality).</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Provide visitors views of the layout (also would like a slightly better video quality).</span></li>
</ul>
<p></p>
<p><span>The downside is that, as with many other similar products, the title claimed are just complete marketing BS. “1080p” or “night vision” in the title are just pure keyword stuffing as these products have no merit in those areas (note that a few of these have a camera module with 2 or 4 small IR LEDs, in which case it may work, I haven’t tried any).</span></p>
<p></p>
<p><span>And to finish, I’d like to mention again how inaccurate titles are a real problem with these. There’s another model of similar-looking pinhole wifi camera circulating on eBay or AliExpress that has the battery integrated with the electronics in a heat-shrink package; although generally listed as a 1080p in the title, the specs have the fantastic claim of being a “Video Resolution Ratio: 640x480 VGA, Network Transmission Resolution Ratio: 320x240 QVGA, Video Frame Rate: 10fps”. This kind of discrepancy should be enough to keep one away for that product. If there are specs, read them! And if they seem inaccurate, they likely are.</span></p>
<p></p>
<hr>
<p></p>


    </div>



<div class="prev-next-container">


    <span class="prev-page"><a href="2019-01-26_conductor_2_routes_profiles.html">⇐ Newer Post</a><br/></span>
    <span class="next-page"><a href="2018-12-14_conductor_2_route_events_programming.html">Older Post ⇒</a><br/></span>

</div>

</div> <!-- container -->
</div> <!-- main -->

<div class="sharethis-inline-share-buttons"></div>

<div class="bottom-container">&nbsp;Generated on 2025-09-01 by Rig4j 0.1-Exp-0c45755&nbsp;</div>

</main>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-M1KDMEFC4D"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-M1KDMEFC4D');
</script>

</body>
</html>

