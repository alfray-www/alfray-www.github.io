<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport"    content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author"      content="">

<link href="atom.xml" type="application/atom+xml" rel="alternate" title="Atom feed for Blog: Model Train-related Notes" />

<meta property="og:url"         content="https://www.alfray.com/trains/blog/train/0002.html" />
<meta property="og:type"        content="article" />

<meta property="og:title"       content="Blog: Model Train-related Notes" />
<meta property="og:description" content="In the latest version of Conductor 2, I’ve added “end-of-route statistics”. I’ve now accumulated enough data to start looking at it." />
<meta property="og:image"       content="https://www.alfray.com/trains/blog/train/img_00608dbba9a28644b702a86dff07157c6de2bf69670bddeddfa57ed5fe2931d0i.png" />

<meta name="twitter:card"        content="summary" />
<!-- meta name="twitter:site"    content="@flickr" / -->

<meta name="twitter:title"       content="Blog: Model Train-related Notes" />
<meta name="twitter:description" content="In the latest version of Conductor 2, I’ve added “end-of-route statistics”. I’ve now accumulated enough data to start looking at it." />
<meta name="twitter:image"       content="https://www.alfray.com/trains/blog/train/img_00608dbba9a28644b702a86dff07157c6de2bf69670bddeddfa57ed5fe2931d0i.png" />

<title>Blog: Model Train-related Notes</title>

<script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5c66171070e9220011ed1c61&product=inline-share-buttons" async="async"></script>

<!-- Custom styles for this template -->
<style type="text/css">
body {
    font-family: sans-serif;
    margin: 0;
}

.main {
    margin: 8px;
}

p, span {
    line-height: 1.2;
    text-align: justify;
}

p.console {
    margin: 0;
    padding: 0;
}

.container {
    max-width: 95%;
}

@media screen and (min-width: 600px) {
    .container {
        max-width: 60rem;
    }
}

.center-horiz {
    margin: auto;
}

.no-margin-container {
}

/* Header + Title */
.blog-header {
  margin-bottom: 3rem;
  background-color: #428bca;
  box-shadow: inset 0 -.1rem .25rem rgba(0,0,0,.1);
}


.banner-bg-image {
    height: 50px;
    background-image: url("header.jpg");
    background-position: center;
    background-size: 100% auto;
}

@media screen and (min-width: 600px) {
    .banner-bg-image {
        height: 200px;
    }
}


.title-container {
    color: #fff;
    padding: 1rem;
    line-height: 1.5;
    font-weight: 500;
    font-size: 24px;
    font-family: sans-serif;
}

.title-container a {
    color: #fff;
    text-decoration: none;
}

.post-container {
}

.bottom-container {
    margin-top: 8px;
    color: #fff;
    background-color: #428bca;
    font-family: sans-serif;
    text-align: center;
    font-size: small;
    line-height: 1rem;
}

@media screen and (min-width: 600px) {
    .bottom-container {
        font-size: x-small;
    }
}

.post-title-container {
    position: relative;
    background-color: #428bca;
    padding: 0.5rem;
}

.post-title {
    display: inline;
    color: #fff;
    font-weight: 500;
    font-family: sans-serif;
    font-size: 1.5em;
}

a.post-title-link {
    color: #fff;
    text-decoration: none;
}

.post-cat {
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    padding: 0.25rem;
    background-color: #d0e0e3;
    color: #000;
    font-weight: 500;
    font-family: sans-serif;
    font-size: 1.5em;
}

a.post-cat-link {
    color: #000;
    text-decoration: none;
}

.post-cat-label {
    display: block;
    text-align: right;
    color: #000;
    font-size: 0.4em;
}

.prev-next-container {
    overflow: auto;
}

.prev-page {
    float: left;
    line-height: 2em;
}

.next-page {
    float: right;
    line-height: 2em;
}

h1, h2, h3, h4, h5, h6 {
    font-family: sans-serif;
    font-weight: bold;
}

.text-hide {
    font: 0/0 a;
    color: transparent;
    text-shadow: none;
    background-color: transparent;
    border: 0;
}

td p {
    margin: 0;
}


</style>
</head>

<body>

<header class="blog-header">

    <div class="no-margin-container banner-bg-image text-hide">
        Site Banner Image
    </div>

    <div class="title-container">
        <a href="https://www.alfray.com/trains/">Ralf's Train Pages</a>
        
        /
        <a href="0002.html">Blog: Model Train-related Notes</a>
        
    </div>
</header>

<main role="main">
<div class="main">
<div class="container center-horiz">

<p><span> </span></p>
<p><span></span></p>
<p><span> </span></p>
<table style="border-collapse:collapse;border-spacing:0;margin-left:auto;margin-right:auto">
 <tbody>
  <tr style="height:0pt">
   <td colspan="1" rowspan="1" style="background-color:rgb(103, 78, 167);border-bottom-color:rgb(255, 255, 255);border-bottom-style:solid;border-bottom-width:1pt;border-left-color:rgb(255, 255, 255);border-left-style:solid;border-left-width:1pt;border-right-color:rgb(255, 255, 255);border-right-style:solid;border-right-width:1pt;border-top-color:rgb(255, 255, 255);border-top-style:solid;border-top-width:1pt;padding:7.2pt 7.2pt 7.2pt 7.2pt;vertical-align:top;width:149.4pt"><p style="text-align:center"><span style="-webkit-text-decoration-skip:none;color:rgb(255, 217, 102);font-size:14pt;font-weight:700;text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/" style="color:inherit;text-decoration:inherit">Train Pages</a></span></p></td>
   <td colspan="1" rowspan="1" style="background-color:rgb(103, 78, 167);border-bottom-color:rgb(255, 255, 255);border-bottom-style:solid;border-bottom-width:1pt;border-left-color:rgb(255, 255, 255);border-left-style:solid;border-left-width:1pt;border-right-color:rgb(255, 255, 255);border-right-style:solid;border-right-width:1pt;border-top-color:rgb(255, 255, 255);border-top-style:solid;border-top-width:1pt;padding:7.2pt 7.2pt 7.2pt 7.2pt;vertical-align:top;width:149.4pt"><p style="text-align:center"><span style="-webkit-text-decoration-skip:none;color:rgb(255, 217, 102);font-size:14pt;font-weight:700;text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/blog/train/" style="color:inherit;text-decoration:inherit">Tech Blog</a></span></p></td>
   <td colspan="1" rowspan="1" style="background-color:rgb(103, 78, 167);border-bottom-color:rgb(255, 255, 255);border-bottom-style:solid;border-bottom-width:1pt;border-left-color:rgb(255, 255, 255);border-left-style:solid;border-left-width:1pt;border-right-color:rgb(255, 255, 255);border-right-style:solid;border-right-width:1pt;border-top-color:rgb(255, 255, 255);border-top-style:solid;border-top-width:1pt;padding:7.2pt 7.2pt 7.2pt 7.2pt;vertical-align:top;width:149.4pt"><p style="text-align:center"><span style="-webkit-text-decoration-skip:none;color:rgb(255, 217, 102);font-size:14pt;font-weight:700;text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/rtac.html" style="color:inherit;text-decoration:inherit">RTAC Software</a></span></p></td>
   <td colspan="1" rowspan="1" style="background-color:rgb(103, 78, 167);border-bottom-color:rgb(255, 255, 255);border-bottom-style:solid;border-bottom-width:1pt;border-left-color:rgb(255, 255, 255);border-left-style:solid;border-left-width:1pt;border-right-color:rgb(255, 255, 255);border-right-style:solid;border-right-width:1pt;border-top-color:rgb(255, 255, 255);border-top-style:solid;border-top-width:1pt;padding:7.2pt 7.2pt 7.2pt 7.2pt;vertical-align:top;width:149.4pt"><p style="text-align:center"><span style="-webkit-text-decoration-skip:none;color:rgb(255, 217, 102);font-size:14pt;font-weight:700;text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.youtube.com/c/raphaelmoll" style="color:inherit;text-decoration:inherit">Videos</a></span></p></td>
  </tr>
 </tbody>
</table>
<p></p>
<p><span style="font-style:italic">Model Train-related Notes Blog -- t</span><span style="font-style:italic">hese are personal notes and musings on the subject of model train control, automation, electronics, or whatever I find interesting. I also have more posts in a blog dedicated to the maintenance of the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);font-style:italic;text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/blog/randall/" style="color:inherit;text-decoration:inherit">Randall Museum Model Railroad</a></span><span style="font-style:italic">.</span></p>
<p><span></span></p>

<div class="prev-next-container">

    <span class="prev-page"><a href="0001.html">⇐ Newer Posts</a><br/></span>
    <span class="next-page"><a href="0003.html">Older Posts ⇒</a><br/></span>


</div>



    <div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2023-09-11_conductor_2_route_statistics_54d3297b.html">
    <h2 class="post-title">2023-09-11 - Conductor 2: Route Statistics with Numbers</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    Rtac
    
    </span>
</span></div>

<p><span></span></p>
<p></p>
<p><span>In the latest version of </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/rtac" style="color:inherit;text-decoration:inherit">Conductor 2</a></span><span>, I’ve </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/blog/train/2023-08-23_conductor_2_route_statistics.html" style="color:inherit;text-decoration:inherit">added “end-of-route statistics”</a></span><span>. I’ve now accumulated enough data to start looking at it.</span></p>
<p></p>
<p><span>First, I needed to parse a JSON log file (a log file with one JSON entry per line per day per run), and I needed a way to convert that to CSV to dump it in a Google Spreadsheet. I briefly considered writing a short python script to do that, then realized that nothing can beat the awesomeness of </span><span style="font-style:italic">sed</span><span>, so I ended up with this:</span></p>
<p></p>
<table style="border-collapse:collapse;border-spacing:0;margin-right:auto">
 <tbody>
  <tr style="height:0pt">
   <td colspan="1" rowspan="1" style="border-bottom-color:rgb(0, 0, 0);border-bottom-style:solid;border-bottom-width:1pt;border-left-color:rgb(0, 0, 0);border-left-style:solid;border-left-width:1pt;border-right-color:rgb(0, 0, 0);border-right-style:solid;border-right-width:1pt;border-top-color:rgb(0, 0, 0);border-top-style:solid;border-top-width:1pt;padding:5pt 5pt 5pt 5pt;vertical-align:top;width:597.6pt"><p style="text-align:left" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">$ grep '{"name"' conductor-log-2023-09-* | sed -E -n '/Recovery/d; /true/d; s/^[^0-9]+//; s/([0-9-]{10})[^:]+:/\1 /; s/ R Seq[^\{]+/@ /; s/":/" /g; s/[^a-zA-Z0-9@.:-]+/,/g; s/@/,/g; s/,ms,([0-9]{3,})/,\1,ms/g; s/([0-9])([0-9]{3}),ms/\1.\2,ms/g; s/,name,|,th|,act|,err,false,nodes|,n|,ms//g; p' &nbsp;| tee ~/temp/_csv.txt</span></p></td>
  </tr>
 </tbody>
</table>
<p></p>
<p><span>I regret nothing. &lt;insert appropriate meme&gt;</span></p>
<p></p>
<p><span>I shall note that this expression purposely only selects log lines that have no errors, that is, successful runs that have completed with no issue. This will become relevant later.</span></p>
<p></p>
<p><span>Now let’s look at the collected data.</span></p>
<p></p>
<p><span style="font-weight:700">Freight Route</span></p>
<p></p>
<p><span>This is a simple shuttle route over two blocks: we’re moving from block B311 (the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/about.html#h.1a30ydkpyo99" style="color:inherit;text-decoration:inherit">Stockton Station</a></span><span>) to B321 (the Sonora Station), stopping there, and then back again to B311. The way I wrote the route stats aggregator, I add an index number when a block is repeated, so “B311.1” means “block B311 when leaving”, and “B311.2” means “block B311 when coming back”.</span></p>
<p></p>
<p><span>I have 98 runs for this one, and when we compute the stats we get a very nice result:</span></p>
<p></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:418.67px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:796.80px"><img alt="" src="img_00608dbba9a28644b702a86dff07157c6de2bf69670bddeddfa57ed5fe2931d0i.png" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p><span></span></p>

<a href="2023-09-11_conductor_2_route_statistics_54d3297b.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2023-08-23_conductor_2_route_statistics.html">
    <h2 class="post-title">2023-08-23 - Conductor 2: Route Statistics</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    Rtac
    
    </span>
</span></div>

<p><span></span></p>
<p></p>
<p><span>The latest fix for </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/rtac" style="color:inherit;text-decoration:inherit">Conductor 2</a></span><span>&nbsp;</span><span>using </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/blog/train/2023-08-12_conductor_2_fixing_an_unreli_29474b30.html" style="color:inherit;text-decoration:inherit">a virtual block for B504</a></span><span>&nbsp;is now installed and has been working very well.</span></p>
<p></p>
<p><span>The latest change I did to Conductor 2 is to </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://github.com/model-railroad/conductor/commit/4aa13c6b77f64d0e4e3b825e2393a476a8996130" style="color:inherit;text-decoration:inherit">compute end-of-route statistics</a></span><span>. Each time a route has finished, we log the time spent on each block as well as the error status of the route. This is sent to a little server over a basic JSON RPC, and in the statistics/status page we get a quick overview of the latest route -- how many times we ran that route during the day, when the last one finished, and how many seconds the train spent on each block:</span></p>
<p></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:212.00px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:796.80px"><img alt="" src="img_ef334aa120981895adfd8c2b575c6a0a68d4eb706460ad4ecdb9717020acc3cci.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p></p>
<p><span>This also keeps track of all the recovery attempts.</span></p>
<p></p>
<p><span>Having the time per block should help me fine-tune the automation script later. We can see the time spent on B321 for example, and directly relate that to the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/blog/train/2023-08-12_conductor_2_fixing_an_unreli_29474b30.html" style="color:inherit;text-decoration:inherit">observations made in the previous post</a></span><span>.</span></p>
<p></p>
<p><span>Finally I also have the info in the server log, which is rotated daily, which means I could compute statistics later. I’m interested in getting the time spent on each block for long term analysis. Can we get trends out of it? How consistent are these running times? For example, could we detect erratic behavior, or do engines suffer some kind of loss of performance before they stop working? </span></p>
<p></p>
<p></p>
<hr>
<p></p>


</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2023-08-12_conductor_2_fixing_an_unreli_29474b30.html">
    <h2 class="post-title">2023-08-12 - Conductor 2: Fixing an Unreliable Mainline Run</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    Rtac
    
    </span>
</span></div>

<p><span></span></p>
<p></p>
<p><span>A few months ago, I changed the automation to </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/blog/train/2023-05-21_conductor_2_now_the_default__3eef9fa3.html" style="color:inherit;text-decoration:inherit">use the new Conductor 2 scripting engine as the default</a></span><span>. It worked very nicely for a while, and in the last few weeks the behavior had degraded: the mainline automation was ending up in error recovery almost every day. The passenger train would be running fine, yet would end up with the automation in error.</span></p>
<p></p>
<p><span>There’s an interesting side effect here: One of the points of </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/rtac" style="color:inherit;text-decoration:inherit">Conductor 2</a></span><span>&nbsp;is to have error recovery, being able to recover when things go wrong. Thus from an outsider’s point of view, the automation was “working” as in “doing something”, although from my point of view it was operating in a degraded running mode.</span></p>
<p></p>
<p><span>Eventually I had enough, reverted the automation computer to run the Conductor 1 script, while I investigated the issue to find the root cause.</span></p>
<p></p>
<p><span>First issue was figuring out what was not working, ending with the automated route in error recovery mode? I realized I simply did not have enough information in the logs to understand that after the fact. </span></p>
<p></p>
<p><span>That led me to </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://github.com/model-railroad/conductor/commit/eaad12ed1b5cf4f852a34c306fd0f511bfd3e3d8" style="color:inherit;text-decoration:inherit">enhance my logging</a></span><span>: log error cases, log the root cause of an error, and log how long each sensor is triggered. I updated the logging, let it run for a while, and then captured one typical error:</span></p>
<p style="margin-left:36pt" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt">14:56:20.416 D 8312 : Horn</span></p>
<p style="margin-left:36pt" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt">14:56:21.117 D 8312 : -12</span></p>
<p style="margin-left:36pt" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt">14:56:34.925 S S/NS771 B321 : ON</span></p>
<p style="margin-left:36pt" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt">14:56:34.926 B S/NS773 B330 : TRAILING after 22.56 seconds</span></p>
<p style="margin-left:36pt" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt">14:56:34.926 B S/NS771 B321 : OCCUPIED</span></p>
<p style="margin-left:36pt" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt">14:56:35.696 S S/NS773 B330 : OFF</span></p>
<p style="margin-left:36pt" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt">14:58:15.785 S S/NS771 B321 : OFF</span></p>
<p style="margin-left:36pt" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt">14:58:35.012 R Sequence Mainline #3 Passenger (8312) : ERROR Sequence Mainline #3 Passenger (8312) current block {B321 [NS771]} suddenly became non-active after 120 seconds.</span></p>
<p style="margin-left:36pt" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt">14:58:35.012 R Sequence Mainline #3 Passenger (8312) : ERROR</span></p>
<p style="margin-left:36pt" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt">14:58:35.012 R Sequence Mainline #3 Passenger (8312) : ERROR Sequence Mainline #3 Passenger (8312) current block {B321 [NS771]} still occupied after 120 seconds.</span></p>
<p><span></span></p>

<a href="2023-08-12_conductor_2_fixing_an_unreli_29474b30.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2023-07-01_conductor_2_w_google_analytics_4.html">
    <h2 class="post-title">2023-07-01 - Conductor 2 w/ Google Analytics 4</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    Rtac
    
    </span>
</span></div>

<p><span></span></p>
<p></p>
<p><span>One of the cornerstones of maintaining any automated process, especially daily automated running of little HO-sized trains on a public music model railroad, is to have dashboards to track the status of the automated processes and being able to see at a glance whether they are healthy.</span></p>
<p></p>
<p><span>For example this is part of a dashboard that I look multiple times a day:</span></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:233.33px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:796.80px"><img alt="" src="img_5be8931741fd913034b5cf00f732dca8381233bba85470ef5f165beceda220aci.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p></p>
<p><span>My dashboards have a few moving parts:</span></p>
<ul style="margin:0">
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>I use the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://developers.google.com/analytics/devguides/collection/protocol/ga4" style="color:inherit;text-decoration:inherit">GA Measurement Protocol</a></span><span>&nbsp;to send custom pings using my own </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://github.com/model-railroad/conductor/blob/main/jmri/conductor/common/src/main/java/com/alflabs/conductor/util/Analytics.java" style="color:inherit;text-decoration:inherit">Analytics.java</a></span><span>&nbsp;in </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/rtac.html" style="color:inherit;text-decoration:inherit">Conductor / RTAC</a></span><span>.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://analytics.google.com/" style="color:inherit;text-decoration:inherit">Google Analytics</a></span><span>&nbsp;receives the “page views” and the events in a “web” property.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://lookerstudio.google.com/" style="color:inherit;text-decoration:inherit">Looker Studio</a></span><span>&nbsp;is used to build the dashboard.</span></li>
</ul>
<p><span></span></p>

<a href="2023-07-01_conductor_2_w_google_analytics_4.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2023-06-04_davinci_resolve_plugin_for_t_4126bb12.html">
    <h2 class="post-title">2023-06-04 - DaVinci Resolve Plugin for the Mobius Car Ride Videos</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    Video
    
    </span>
</span></div>

<p><span></span></p>
<p></p>
<p><span>I have </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/blog/train/2023-01-02_cab_ride_videos_with_the_mob_a8befb95.html" style="color:inherit;text-decoration:inherit">detailed in a previous post</a></span><span>&nbsp;how I create my “car/cab ride” videos: a </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/blog/train/2023-01-01_mobius_maxi_4k.html" style="color:inherit;text-decoration:inherit">Mobius Maxi 4K</a></span><span>&nbsp;is placed on a flat car, and either pulled or pushed by the train using a custom “3D-printed rod” draw-bar connector:</span></p>
<p></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:186.67px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:796.80px"><img alt="" src="img_85fe3c03fcf8fc8af80bdee86af60db7c57e26170b6c4f3b184afae4826c678ai.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p></p>
<p><span>The only issue with this approach is the extremely visible rod on the camera, even after cropping a 1080p out of the 4K video. I’ve had many comments that it’s quite distracting; I fully agree; it’s been bugging me too:</span></p>
<p></p>
<table style="border-collapse:collapse;border-spacing:0;margin-right:auto">
 <tbody>
  <tr style="height:0pt">
   <td colspan="1" rowspan="1" style="border-bottom-color:rgb(0, 0, 0);border-bottom-style:solid;border-bottom-width:0pt;border-left-color:rgb(0, 0, 0);border-left-style:solid;border-left-width:0pt;border-right-color:rgb(0, 0, 0);border-right-style:solid;border-right-width:0pt;border-top-color:rgb(0, 0, 0);border-top-style:solid;border-top-width:0pt;vertical-align:top;width:298.8pt"><p style="text-align:left"><span style="vertical-align:baseline">Could there be a way to go from this:</span></p></td>
   <td colspan="1" rowspan="1" style="border-bottom-color:rgb(0, 0, 0);border-bottom-style:solid;border-bottom-width:0pt;border-left-color:rgb(0, 0, 0);border-left-style:solid;border-left-width:0pt;border-right-color:rgb(0, 0, 0);border-right-style:solid;border-right-width:0pt;border-top-color:rgb(0, 0, 0);border-top-style:solid;border-top-width:0pt;vertical-align:top;width:298.8pt"><p style="text-align:left"><span style="vertical-align:baseline">to that?</span></p></td>
  </tr>
  <tr style="height:0pt">
   <td colspan="1" rowspan="1" style="border-bottom-color:rgb(0, 0, 0);border-bottom-style:solid;border-bottom-width:0pt;border-left-color:rgb(0, 0, 0);border-left-style:solid;border-left-width:0pt;border-right-color:rgb(0, 0, 0);border-right-style:solid;border-right-width:0pt;border-top-color:rgb(0, 0, 0);border-top-style:solid;border-top-width:0pt;vertical-align:top;width:298.8pt"><p style="text-align:left"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:227.00px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:396.00px"><img alt="" src="img_6965f0968cec7bf14b8771c571c7d5caf16877632460ca13166519359e78ba1bi.jpg" style="height:248.00px;margin-left:0.00px;margin-top:-21.00px" title=""></span></p></td>
   <td colspan="1" rowspan="1" style="border-bottom-color:rgb(0, 0, 0);border-bottom-style:solid;border-bottom-width:0pt;border-left-color:rgb(0, 0, 0);border-left-style:solid;border-left-width:0pt;border-right-color:rgb(0, 0, 0);border-right-style:solid;border-right-width:0pt;border-top-color:rgb(0, 0, 0);border-top-style:solid;border-top-width:0pt;vertical-align:top;width:298.8pt"><p><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:226.67px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:397.00px"><img alt="" src="img_cd90754fb6b86ca8b8d6a31f664df8fe92d5290f45ecc8a96d5b4ee9b50c87b5i.jpg" style="height:248.04px;margin-left:0.00px;margin-top:-21.37px" title=""></span></p></td>
  </tr>
 </tbody>
</table>
<p><span></span></p>

<a href="2023-06-04_davinci_resolve_plugin_for_t_4126bb12.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2023-05-21_conductor_2_now_the_default__3eef9fa3.html">
    <h2 class="post-title">2023-05-21 - Conductor 2: Now the Default on the Automation Computer!</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    Rtac
    
    </span>
</span></div>

<p><span></span></p>
<p></p>
<p><span>I tested </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/rtac" style="color:inherit;text-decoration:inherit">Conductor 2</a></span><span>&nbsp;with script 53 while the rest of the team was cleaning the layout and it worked reliably.</span></p>
<p><span>Thus I enabled it as the default for the automation computer.</span></p>
<p></p>
<p><span>Basic recovery was also tested and worked in the “ideal” conditions.</span></p>
<p><span>Known cases where recovery will not work:</span></p>
<ul style="margin:0">
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Branchline on virtual block B830.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>PA/FR on flaky block B321 not registering the train stopped.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Any train stopped across two blocks and activating both blocks.</span></li>
</ul>
<p></p>
<p><span>The plan for B830 is to convert it to a real block sensor.</span></p>
<p></p>
<p><span>The plan for B321 is to change the sensor to another type than the BD20 with hopefully better sensitivity -- I’m especially interested in trying the new </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.iascaled.com/store/CKT-BD1" style="color:inherit;text-decoration:inherit">ATOM DCC Block Detector (CKT-BD1)</a></span><span>&nbsp;from Iowa Scaled Engineering. </span></p>
<p></p>
<p><span>Dealing with the train stopped and activated two blocks will need more work, either on the Conductor engine side or on the script side. I need to think more about how I want to handle that one. One option is for the recovery script to be able to mark 2 consecutively occupied blocks as “occupied + trailing” since that’s really the state they are supposed to be in. Then the normal engine behavior will take care of it properly.</span></p>
<p></p>
<hr>
<p></p>


</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2023-05-10_conductor_2_crossing_block_boundaries.html">
    <h2 class="post-title">2023-05-10 - Conductor 2: Crossing Block Boundaries</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    Rtac
    
    </span>
</span></div>

<p><span></span></p>
<p></p>
<p><span>Now I understand the issue that was affecting the automated freight train; it's quite interesting and worth elaborating.</span></p>
<p></p>
<p><span>First, as a recap, the freight route is a shuttle composed of 2 blocks. The train starts on say block A, travels to the consecutive block B, stops, and reverses to block A. The sequence is very simple:</span></p>
<p></p>
<p class="console "><span>Step / State Block A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;State Block B&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Description<br>1- </span><span style="font-family:&quot;Consolas&quot;;font-size:9pt">[ A </span><span style="background-color:rgb(244, 204, 204);font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp;active </span><span style="font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp;</span><span style="background-color:rgb(217, 234, 211);font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp;occupied </span><span style="font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp;] &nbsp; [ B inactive </span><span style="background-color:rgb(255, 242, 204);font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp; empty &nbsp; </span><span style="font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp;]</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Start from A</span><span style="font-family:&quot;Consolas&quot;;font-size:9pt"><br></span><span>2- </span><span style="font-family:&quot;Consolas&quot;;font-size:9pt">[ A inactive </span><span style="background-color:rgb(252, 229, 205);font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp;trailing </span><span style="font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp;] &nbsp; [ B </span><span style="background-color:rgb(244, 204, 204);font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp;active </span><span style="font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp;</span><span style="background-color:rgb(217, 234, 211);font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp;occupied </span><span style="font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp;]</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Crosses from A to B</span><span style="font-family:&quot;Consolas&quot;;font-size:9pt"><br></span><span>2- </span><span style="font-family:&quot;Consolas&quot;;font-size:9pt">[ A inactive </span><span style="background-color:rgb(252, 229, 205);font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp;trailing </span><span style="font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp;] &nbsp; [ B </span><span style="background-color:rgb(244, 204, 204);font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp;active </span><span style="font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp;</span><span style="background-color:rgb(217, 234, 211);font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp;occupied </span><span style="font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp;]</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Stops &amp; Reverses</span><span style="font-family:&quot;Consolas&quot;;font-size:9pt"><br></span><span>3- </span><span style="font-family:&quot;Consolas&quot;;font-size:9pt">[ A </span><span style="background-color:rgb(244, 204, 204);font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp;active </span><span style="font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp;</span><span style="background-color:rgb(217, 234, 211);font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp;occupied </span><span style="font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp;] &nbsp; [ B inactive </span><span style="background-color:rgb(252, 229, 205);font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp;trailing </span><span style="font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp;]</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Crosses from B to A</span><span style="font-family:&quot;Consolas&quot;;font-size:9pt"><br></span><span>4- </span><span style="font-family:&quot;Consolas&quot;;font-size:9pt">[ A </span><span style="background-color:rgb(244, 204, 204);font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp;active </span><span style="font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp;</span><span style="background-color:rgb(217, 234, 211);font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp;occupied </span><span style="font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp;] &nbsp; [ B inactive </span><span style="background-color:rgb(255, 242, 204);font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp; empty &nbsp; </span><span style="font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp;]</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Stops back on A and resets</span></p>
<p></p>
<p><span>Note how although we have 5 logical steps, there are only 4 different steps from the sensor/block occupancy point of view -- there is no difference whether the engine is running on block B or stopped and waiting till it reverses.</span></p>
<p><span></span></p>

<a href="2023-05-10_conductor_2_crossing_block_boundaries.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2023-05-06_conductor_2_the_flaky_sensors_issue.html">
    <h2 class="post-title">2023-05-06 - Conductor 2: The “Flaky” Sensors Issue</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    Rtac
    
    </span>
</span></div>

<p><span></span></p>
<p></p>
<p><span>I’m still trying to deploy </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/rtac" style="color:inherit;text-decoration:inherit">Conductor 2</a></span><span>&nbsp;and it’s clearly not ready yet. I keep finding issues, some expected, some not.</span></p>
<p></p>
<p><span>The Freight automation has been an interesting source of such unexpected issues. It’s a simple reversing shuttle automation across two blocks, yet it has proven more challenging than the complex Passenger and Branchline automations -- these two actually perform quite well. Yet the “simpler” Freight one does not.</span></p>
<p></p>
<p><span>The most notable “bug” here is with the Freight automation: the engine starts on the first block, travels to the second block as expected…, and then instead of reversing the engine back to the beginning of the route, it decides the engine is back on the first block when it’s clearly still on the second block. At that point the automation panics because the engine is obviously not back at the starting point. The programming is entirely skipping half of the route automation, for no apparent reason. Why?</span></p>
<p></p>
<p><span>One of the issues which I was more or less expecting was dealing with the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/blog/randall/2023-05-01_adjusting_the_mountain_bd20_sensors.html" style="color:inherit;text-decoration:inherit">“flaky” sensor on B321, as I explain in detail on that post on the other blog</a></span><span>. There’s some of that here, but there’s also something else entirely going on that I have not figured out yet.</span></p>
<p></p>
<p><span>Even after a bit of adjusting, the mountain sensors are still flaky, notably B321 and B370 with the Passenger train. I adjusted B321 for the Freight train but the newer PA engine is still borderline.</span></p>
<p></p>
<p><span>Of importance, these sensors detect current consumption. In the case of the reversing train, the sensor turns off when the train is stopped.</span></p>
<p><span></span></p>

<a href="2023-05-06_conductor_2_the_flaky_sensors_issue.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2023-04-24_conductor_2_dsl_throttle_onl_87348bbf.html">
    <h2 class="post-title">2023-04-24 - Conductor 2: DSL Throttle onLight / onSound / onBell</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    Rtac
    
    </span>
</span></div>

<p><span></span></p>
<p></p>
<p><span>Here’s the new syntax:</span></p>
<p class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp; &nbsp; &nbsp; &nbsp; val T1 = throttle(1001) </span><span style="background-color:rgb(217, 234, 211);font-family:&quot;Consolas&quot;;font-size:9pt">{</span></p>
<p class="console "><span style="background-color:rgb(217, 234, 211);font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; onLight { b -&gt; throttle.f0( b) }</span></p>
<p class="console "><span style="background-color:rgb(217, 234, 211);font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; onSound { b -&gt; throttle.f8(!b) }</span></p>
<p class="console "><span style="background-color:rgb(217, 234, 211);font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; onBell &nbsp;{ throttle.f1(it) }</span></p>
<p class="console "><span style="background-color:rgb(217, 234, 211);font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp; &nbsp; &nbsp; &nbsp; }</span><span style="font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp;named "Throttle1"</span></p>
<p class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp; &nbsp; &nbsp; &nbsp; on { S1 } then {</span></p>
<p class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T1.light(true)</span></p>
<p class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T1.sound(true)</span></p>
<p class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T1.bell(true)</span></p>
<p class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T1.horn()</span></p>
<p class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p>
<p></p>
<p><span>Note that it seems quite annoying to have to place the “named ‘Xyz’” after the function block, so this syntax is also allowed:</span></p>
<p><span></span></p>

<a href="2023-04-24_conductor_2_dsl_throttle_onl_87348bbf.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2023-04-09_conductor_2_virtual_blocks_i_4b939f77.html">
    <h2 class="post-title">2023-04-09 - Conductor 2: Virtual Blocks Implementation</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    Rtac
    
    </span>
</span></div>

<p><span></span></p>
<p></p>
<p><span>Let’s implement virtual blocks. These have been part of the original design and I now have a need for them.</span></p>
<p></p>
<p><span>As a reminder, what is a virtual block and what is it good for?</span></p>
<p><span>Let’s look at the Branchline. It’s is a simple straight chain of blocks as shown in yellow on this map:</span></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:165.00px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:357.00px"><img alt="" src="img_61b66d301f05ed6bc167a01a8d573ad0c63b00935ba4cb8ce7e817b793c9c9c1i.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p><span>Because the track is curved and goes through tunnels, it looks complicated, yet it’s really a straight line:</span></p>
<ul style="margin:0">
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>[ B801 parking ] ⇒ [ B820 station ] ⇒ [ B830 canyon ] ⇒ [ B850 tunnel ] ⇒ [ B860 reversing block ]</span></li>
</ul>
<p></p>
<p><span>One thing not obvious on this map is that B830 has no track sensor associated with it. When I did the original sensor wiring back in 2017, I simply couldn’t identify the corresponding track feeders, and I suspect (or hope) there are actually two blocks in there because it’s a fairly long segment. That’s why I left a B840 in my naming scheme, for potential later usage.</span></p>
<p></p>
<p><span>But now the concept behind the Conductor 2 automation is for the engine to track on which block the train is </span><span style="font-style:italic">supposed to be</span><span>, and match that with the reality of the track sensors. That’s a problem in this case since after moving out of block B820 we have no idea… the track appears empty, and that’s a definite error condition. How do we solve that in the script?</span></p>
<p><span></span></p>

<a href="2023-04-09_conductor_2_virtual_blocks_i_4b939f77.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>





<div class="prev-next-container">

    <span class="prev-page"><a href="0001.html">⇐ Newer Posts</a><br/></span>
    <span class="next-page"><a href="0003.html">Older Posts ⇒</a><br/></span>


</div>

</div> <!-- container -->
</div> <!-- main -->

<div class="sharethis-inline-share-buttons"></div>

<div class="bottom-container">&nbsp;Generated on 2025-09-05 by Rig4j 0.1-Exp-05cc7b2&nbsp;</div>

</main>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-M1KDMEFC4D"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-M1KDMEFC4D');
</script>

</body>
</html>

