<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport"    content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author"      content="">

<link href="atom.xml" type="application/atom+xml" rel="alternate" title="Atom feed for Blog: Model Train-related Notes" />

<meta property="og:url"         content="https://www.alfray.com/trains/blog/train/2025-04-07_distant_signal_the_hub75_pro_6347ebc3.html" />
<meta property="og:type"        content="article" />
<meta property="og:title"       content="Distant Signal: The HUB75 Protocol for LED Matrix Displays" />

<meta property="og:description" content="This is the display I use for Distant Signal:" />
<meta property="og:image"       content="https://www.alfray.com/trains/blog/train/img_35fa0cf0851544c9c6af1ca46d8711a2249d7f5f89031158185433f915e89feci.jpg" />

<meta name="twitter:card"        content="summary" />
<!-- meta name="twitter:site"    content="@flickr" / -->
<meta name="twitter:title"       content="Distant Signal: The HUB75 Protocol for LED Matrix Displays" />

<meta name="twitter:description" content="This is the display I use for Distant Signal:" />
<meta name="twitter:image"       content="https://www.alfray.com/trains/blog/train/img_35fa0cf0851544c9c6af1ca46d8711a2249d7f5f89031158185433f915e89feci.jpg" />

<title>Blog: Model Train-related Notes</title>

<script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5c66171070e9220011ed1c61&product=inline-share-buttons" async="async"></script>

<!-- Custom styles for this template -->
<style type="text/css">
body {
    font-family: sans-serif;
    margin: 0;
}

.main {
    margin: 8px;
}

p, span {
    line-height: 1.2;
    text-align: justify;
}

p.console {
    margin: 0;
    padding: 0;
}

.container {
    max-width: 95%;
}

@media screen and (min-width: 600px) {
    .container {
        max-width: 60rem;
    }
}

.center-horiz {
    margin: auto;
}

.no-margin-container {
}

/* Header + Title */
.blog-header {
  margin-bottom: 3rem;
  background-color: #428bca;
  box-shadow: inset 0 -.1rem .25rem rgba(0,0,0,.1);
}


.banner-bg-image {
    height: 50px;
    background-image: url("header.jpg");
    background-position: center;
    background-size: 100% auto;
}

@media screen and (min-width: 600px) {
    .banner-bg-image {
        height: 200px;
    }
}


.title-container {
    color: #fff;
    padding: 1rem;
    line-height: 1.5;
    font-weight: 500;
    font-size: 24px;
    font-family: sans-serif;
}

.title-container a {
    color: #fff;
    text-decoration: none;
}

.post-container {
}

.bottom-container {
    margin-top: 8px;
    color: #fff;
    background-color: #428bca;
    font-family: sans-serif;
    text-align: center;
    font-size: small;
    line-height: 1rem;
}

@media screen and (min-width: 600px) {
    .bottom-container {
        font-size: x-small;
    }
}

.post-title-container {
    position: relative;
    background-color: #428bca;
    padding: 0.5rem;
}

.post-title {
    display: inline;
    color: #fff;
    font-weight: 500;
    font-family: sans-serif;
    font-size: 1.5em;
}

a.post-title-link {
    color: #fff;
    text-decoration: none;
}

.post-cat {
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    padding: 0.25rem;
    background-color: #d0e0e3;
    color: #000;
    font-weight: 500;
    font-family: sans-serif;
    font-size: 1.5em;
}

a.post-cat-link {
    color: #000;
    text-decoration: none;
}

.post-cat-label {
    display: block;
    text-align: right;
    color: #000;
    font-size: 0.4em;
}

.prev-next-container {
    overflow: auto;
}

.prev-page {
    float: left;
    line-height: 2em;
}

.next-page {
    float: right;
    line-height: 2em;
}

h1, h2, h3, h4, h5, h6 {
    font-family: sans-serif;
    font-weight: bold;
}

.text-hide {
    font: 0/0 a;
    color: transparent;
    text-shadow: none;
    background-color: transparent;
    border: 0;
}

td p {
    margin: 0;
}


</style>
</head>

<body>

<header class="blog-header">

    <div class="no-margin-container banner-bg-image text-hide">
        Site Banner Image
    </div>

    <div class="title-container">
        <a href="https://www.alfray.com/trains/">Ralf's Train Pages</a>
        
        /
        <a href="index.html">Blog: Model Train-related Notes</a>
        
    </div>
</header>

<main role="main">
<div class="main">
<div class="container center-horiz">

<p><span> </span></p>
<p><span></span></p>
<p><span> </span></p>
<table style="border-collapse:collapse;border-spacing:0;margin-left:auto;margin-right:auto">
 <tbody>
  <tr style="height:0pt">
   <td colspan="1" rowspan="1" style="background-color:rgb(103, 78, 167);border-bottom-color:rgb(255, 255, 255);border-bottom-style:solid;border-bottom-width:1pt;border-left-color:rgb(255, 255, 255);border-left-style:solid;border-left-width:1pt;border-right-color:rgb(255, 255, 255);border-right-style:solid;border-right-width:1pt;border-top-color:rgb(255, 255, 255);border-top-style:solid;border-top-width:1pt;padding:7.2pt 7.2pt 7.2pt 7.2pt;vertical-align:top;width:149.4pt"><p style="text-align:center"><span style="-webkit-text-decoration-skip:none;color:rgb(255, 217, 102);font-size:14pt;font-weight:700;text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/" style="color:inherit;text-decoration:inherit">Train Pages</a></span></p></td>
   <td colspan="1" rowspan="1" style="background-color:rgb(103, 78, 167);border-bottom-color:rgb(255, 255, 255);border-bottom-style:solid;border-bottom-width:1pt;border-left-color:rgb(255, 255, 255);border-left-style:solid;border-left-width:1pt;border-right-color:rgb(255, 255, 255);border-right-style:solid;border-right-width:1pt;border-top-color:rgb(255, 255, 255);border-top-style:solid;border-top-width:1pt;padding:7.2pt 7.2pt 7.2pt 7.2pt;vertical-align:top;width:149.4pt"><p style="text-align:center"><span style="-webkit-text-decoration-skip:none;color:rgb(255, 217, 102);font-size:14pt;font-weight:700;text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/blog/train/" style="color:inherit;text-decoration:inherit">Tech Blog</a></span></p></td>
   <td colspan="1" rowspan="1" style="background-color:rgb(103, 78, 167);border-bottom-color:rgb(255, 255, 255);border-bottom-style:solid;border-bottom-width:1pt;border-left-color:rgb(255, 255, 255);border-left-style:solid;border-left-width:1pt;border-right-color:rgb(255, 255, 255);border-right-style:solid;border-right-width:1pt;border-top-color:rgb(255, 255, 255);border-top-style:solid;border-top-width:1pt;padding:7.2pt 7.2pt 7.2pt 7.2pt;vertical-align:top;width:149.4pt"><p style="text-align:center"><span style="-webkit-text-decoration-skip:none;color:rgb(255, 217, 102);font-size:14pt;font-weight:700;text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/rtac.html" style="color:inherit;text-decoration:inherit">RTAC Software</a></span></p></td>
   <td colspan="1" rowspan="1" style="background-color:rgb(103, 78, 167);border-bottom-color:rgb(255, 255, 255);border-bottom-style:solid;border-bottom-width:1pt;border-left-color:rgb(255, 255, 255);border-left-style:solid;border-left-width:1pt;border-right-color:rgb(255, 255, 255);border-right-style:solid;border-right-width:1pt;border-top-color:rgb(255, 255, 255);border-top-style:solid;border-top-width:1pt;padding:7.2pt 7.2pt 7.2pt 7.2pt;vertical-align:top;width:149.4pt"><p style="text-align:center"><span style="-webkit-text-decoration-skip:none;color:rgb(255, 217, 102);font-size:14pt;font-weight:700;text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.youtube.com/c/raphaelmoll" style="color:inherit;text-decoration:inherit">Videos</a></span></p></td>
  </tr>
 </tbody>
</table>
<p></p>
<p><span style="font-style:italic">Model Train-related Notes Blog -- t</span><span style="font-style:italic">hese are personal notes and musings on the subject of model train control, automation, electronics, or whatever I find interesting. I also have more posts in a blog dedicated to the maintenance of the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);font-style:italic;text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/blog/randall/" style="color:inherit;text-decoration:inherit">Randall Museum Model Railroad</a></span><span style="font-style:italic">.</span></p>
<p><span></span></p>

<div class="prev-next-container">


    <span class="prev-page"><a href="2025-07-07_new_wazz_web_dashboard.html">⇐ Newer Post</a><br/></span>
    <span class="next-page"><a href="2025-03-30_distant_signal_matrix_displa_0df54754.html">Older Post ⇒</a><br/></span>

</div>


    <div class="post-container">
    <div class="post-title-container"><h2 class="post-title">2025-04-07 - Distant Signal: The HUB75 Protocol for LED Matrix Displays</h2>
    <span class="post-cat" title="Category">
            <span class="post-cat-label">Category</span>
            <span class="post-cat-text">Arduino</span>
    </span>
    </div>


    <p><span></span></p>
<p></p>
<p style="text-align:left"><span>This is the display I use for </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://github.com/model-railroad/distant-signal" style="color:inherit;text-decoration:inherit">Distant Signal</a></span><span>:</span></p>
<ul style="margin:0">
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.adafruit.com/product/2278" style="color:inherit;text-decoration:inherit">https://www.adafruit.com/product/2278</a></span><span>&nbsp;$40, 64x32 with 4 mm pitch.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.aliexpress.us/item/3256808335479840.html" style="color:inherit;text-decoration:inherit">https://www.aliexpress.us/item/3256808335479840.html</a></span><span>, $18, 64x32 with 4 mm pitch.</span></li>
</ul>
<p></p>
<p><span>Here’s the AliExpress one in use:</span></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:349.33px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:796.80px"><img alt="" src="img_35fa0cf0851544c9c6af1ca46d8711a2249d7f5f89031158185433f915e89feci.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p></p>
<p><span>Using the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.adafruit.com/product/2278" style="color:inherit;text-decoration:inherit">AdaFruit version</a></span><span>, here’s what the back of the panel looks like, annotated:</span></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:332.00px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:690.00px"><img alt="" src="img_c47ba6195a160e05e2c3abbda43336160088e269a84a992fdc81f09a025ab9e3d.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span><span><br></span><span style="font-size:9pt;font-style:italic">Source: </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);font-size:9pt;font-style:italic;text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.adafruit.com/product/2278" style="color:inherit;text-decoration:inherit">AdaFruit</a></span><span style="font-style:italic">.</span></p>
<p></p>
<p><span>Notice the little vertical chips that are highlighted in Red, Green, Blue above. There are 4 x 3 x 2 of them.</span></p>
<p></p>
<p><span>The HUB75 connector is an industry ad-hoc connector. As far as I can tell, there is no solid specification anywhere to be found. Instead, it seems to have evolved over the years, and used more or less in a compatible way.</span></p>
<p><span></span></p>
<p></p>
<p><span>So here’s how this panel works:</span></p>
<ul style="margin:0">
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>The panel has no memory frame buffer per se.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>The panel is composed of RGB LEDs that can be individually turned on or off. There is no variation on brightness -- each pixel’s RGB component is either on or off.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>The little chips highlighted in the RGB sections above are ICN2037BP -- these are “</span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://olympianled.com/wp-content/uploads/2021/05/ICN2037_datasheet_EN_2017_V2.0.pdf" style="color:inherit;text-decoration:inherit">16-channel constant current sink output LED drivers</a></span><span>” (</span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://olympianled.com/wp-content/uploads/2021/05/ICN2037_datasheet_EN_2017_V2.0.pdf" style="color:inherit;text-decoration:inherit">datasheet PDF</a></span><span>).</span></li>
</ul>
<p></p>
<p><span>What this means is that each chip can hold 16 bits of data. 4 chips per line allows it to hold up to one line of 64 bits, and we need 3 of them per line to hold enough data to drive 64 RGB LEDs in one line.</span></p>
<p></p>
<p><span>Let’s keep in mind that this is a 64x32 LED panel. That’s a very important detail.</span></p>
<p></p>
<p><span>The connector is a bit puzzling at first:</span></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:247.56px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:624.00px"><img alt="" src="img_474572fbd095598a7605e670d3e251715d89677db98828b81e093aa0f29c7e74d.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span><span><br></span><span style="font-size:9pt;font-style:italic">HUB75 vs HUB75-E connector: Sources: </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);font-size:9pt;font-style:italic;text-decoration:underline;text-decoration-skip-ink:none"><a href="https://learn.lushaylabs.com/led-panel-hub75/" style="color:inherit;text-decoration:inherit">lushaylabs</a></span><span style="font-size:9pt;font-style:italic">&nbsp;and </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);font-size:9pt;font-style:italic;text-decoration:underline;text-decoration-skip-ink:none"><a href="https://justanotherelectronicsblog.com/?p=636" style="color:inherit;text-decoration:inherit">justanotherelectronicsblog</a></span><span style="font-style:italic">.<br></span><span style="font-size:9pt;font-style:italic">I like how there are 2 ways to number the pins</span><span style="font-style:italic">.</span></p>
<p></p>
<p><span>The HUB75 connector basically drives the electronics directly:</span></p>
<ul style="margin:0">
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>There are pins to provide color data for 2 lines of colors, RGB0 and RGB1, at the same time.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>There’s an “address bus” consisting of 4 pins -- that’s 4 bits, which is enough to select one out of 16 lines.</span></li>
</ul>
<p></p>
<p><span>So here’s how one displays one frame of image on a 64x32 panel:</span></p>
<ul style="margin:0">
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Turn the entire panel off using the /OE (output enable) pin.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Select the one line out of 16 to update, from 0 to 15, using the 4 address pins.</span></li>
 <ul>
  <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>The panel has 32 lines yet we can only select one out of 16, how does that work?</span></li>
  <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>That’s why there are RGB0 and RGB1 pins: we fill 2 lines at the same time.</span></li>
  <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>The panel is essentially split in two halves vertically. </span></li>
  <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Selecting the address 0 sends data to line 0 and line 16. Using address 1 sends data to line 1 and 17, etc., all the way up to line 15 and 31.</span></li>
 </ul>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Send 64 bits for 2 lines on the RGB0 and RGB1 pins.</span></li>
 <ul>
  <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Note that each RGB component is either turned on or turned off for each pixel. There is no brightness selection here.</span></li>
  <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>The CLK (clock) pin is used to clock in the 64 bits composing the line.</span></li>
 </ul>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Once that is done, use the LATCH pin to copy the data into a second set of buffers that directly drive the LEDs. This is done internally in the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://olympianled.com/wp-content/uploads/2021/05/ICN2037_datasheet_EN_2017_V2.0.pdf" style="color:inherit;text-decoration:inherit">ICN2037</a></span><span>.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Finally release the /OE (output enable) pin to allow the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://olympianled.com/wp-content/uploads/2021/05/ICN2037_datasheet_EN_2017_V2.0.pdf" style="color:inherit;text-decoration:inherit">ICN2037</a></span><span>&nbsp;</span><span>drivers to light up the select lines of LEDs.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Rinse and repeat with the next line.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Once the 16 “dual lines” have been processed, rinse and repeat for the next frame.</span></li>
</ul>
<p></p>
<p><span>The take from that is that this panel only updates two lines of pixels at a time, but it’s a bit more than that: it only </span><span style="font-style:italic">displays</span><span>&nbsp;2 lines of pixels at a time. Whilst 2 lines of pixels are turned on, everything else on the panel is turned off. Then the driver just needs to update all the lines one by one, fast enough to take effect of the natural </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://en.wikipedia.org/wiki/Persistence_of_vision" style="color:inherit;text-decoration:inherit">persistence of vision</a></span><span>&nbsp;to avoid flickering.</span></p>
<p></p>
<p><span>So now, back to that HUB75 connector: the number of address pins is inherently linked to the number of lines on the panel.</span></p>
<ul style="margin:0">
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>A 16-line panel uses 3 address pins: </span><span style="font-family:&quot;Consolas&quot;">A, B, C &nbsp; &nbsp; &nbsp; </span><span>→ 3 bits = 8 combinations, x 2 &nbsp;= 16 lines.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>A 32-line panel uses 4 address pins: </span><span style="font-family:&quot;Consolas&quot;">A, B, C, D &nbsp; &nbsp;</span><span>→ 4 bits = 16 combinations, x 2 &nbsp;= 32 lines.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>A 64-line panel uses 5 address pins: </span><span style="font-family:&quot;Consolas&quot;">A, B, C, D, E </span><span>→ 5 bits = 32 combinations, x 2 &nbsp;= 64 lines.</span></li>
</ul>
<p></p>
<p><span>AdaFruit has a very convenient “</span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://learn.adafruit.com/adafruit-protomatter-rgb-matrix-library/overview" style="color:inherit;text-decoration:inherit">Protomatter</a></span><span>” library to drive these panels, and the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://docs.circuitpython.org/en/latest/shared-bindings/rgbmatrix/" style="color:inherit;text-decoration:inherit">Matrix class</a></span><span>&nbsp;is initialized accordingly as such:</span></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:218.04px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:383.90px"><img alt="" src="img_bf79ebac81fe73f374f0bd11a391f5cec24be535da0ae34a1c3c3c91e220d530i.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p></p>
<p><span>Now, when I did that on the AliExpress panel, it sort of worked but the display was only showing up on half the panel. The second half was always black. How come? Was it broken?</span></p>
<p></p>
<p><span>The </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.aliexpress.us/item/3256808335479840.html" style="color:inherit;text-decoration:inherit">AliExpress listing shows the back of the panel</a></span><span>&nbsp;and it looks exactly like the one from AdaFruit.</span></p>
<p></p>
<p><span>But that’s now what I received. What I got is slightly different, and at first I totally missed the difference:</span></p>
<p></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:401.33px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:796.80px"><img alt="" src="img_edf6a9e45975042a9e9c20bf41e87128686941e6d915d4a0d985f9c74f5b2992i.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p></p>
<p style="text-align:left"><span>What’s on that board:</span></p>
<ul style="margin:0">
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt;text-align:left"><span>1x 74HC04D Hex Inverter (6 Channel)</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt;text-align:left"><span>2x DP245C “</span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://kuku.eu.org/?projects/hub75e/index" style="color:inherit;text-decoration:inherit">likely some 74HC245 clone</a></span><span>” which is an 8-bit non-inverting transceiver (it has an 8-bit port A and B and transfers A to B or B to A depending on a direction bit).</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt;text-align:left"><span>3x ChipOne ICN2012 “8-Channel Power Switch for LED Display”</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt;text-align:left"><span>4x3 ChipOne </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://olympianled.com/wp-content/uploads/2021/05/ICN2037_datasheet_EN_2017_V2.0.pdf" style="color:inherit;text-decoration:inherit">ICN2037BP</a></span><span>&nbsp;</span><span>“16-channel constant current sink output LED driver”</span></li>
</ul>
<p></p>
<p><span>The main differences are:</span></p>
<ul style="margin:0">
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>There’s only half the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://olympianled.com/wp-content/uploads/2021/05/ICN2037_datasheet_EN_2017_V2.0.pdf" style="color:inherit;text-decoration:inherit">ICN2037BP</a></span><span>&nbsp;line buffers.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>The connector is a “HUB75-E” and has 5 address pins, like a 64x64 panel would have.</span></li>
</ul>
<p></p>
<p><span>There is only one “line” of memory buffers: enough to buffer 64 bits for 3 colors, just one line, not two lines.</span></p>
<p><span>I posit that the RGB0 pins are used and the RGB1 pins are not used on the connector.</span></p>
<p><span>Instead, the line address selection is done using the 5-bit address bus: one line out of 32. This doesn’t do the “dual lines at the same time” trick from the other panel.</span></p>
<p></p>
<p><span>The other difference, which I noticed much later after I did all my research on how that “HUB75” works is actually written right on the panel, except it’s hard to see. Here are the part numbers on both panels:</span></p>
<ul style="margin:0">
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>The AdaFruit is a P4-2121-64*32-16S-HL1.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>The AliExpress I received is a P4-64X32-32S(2020)-V1.0<br>(the vendor’s stock image has a different part number, too fuzzy to read)</span></li>
</ul>
<p></p>
<p><span>Part of that is hidden behind the plastic support. What we can deduce from these part numbers:</span></p>
<ul style="margin:0">
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>P4: The panels have a 4-mm pitch.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>2121: That’s the size of the LEDs (2.1mm x 2.1mm)</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>64x32: That’s the number of LEDs.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>16S vs 32S: Address selection is done using 4 pins (16 lines) or 5 pins (32 lines).</span></li>
</ul>
<p></p>
<p><span>However, as I noted earlier, that’s not what is shown in the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.aliexpress.us/item/3256808335479840.html" style="color:inherit;text-decoration:inherit">AliExpress listing</a></span><span>. It’s apparently a common issue with ordering from there -- vendors will basically send whatever they have that looks more or less like the listing they are selling, with little regard for accuracy. The vendor who sent that probably thought “64x32 panel with 4 mm pitch, same thing, ship it! If the customer is not satisfied, they will rant, and then we can address it via resolution.”</span></p>
<p></p>
<p><span>I thought about returning it, but honestly, I’m fine. I realize the panel is not broken per se.</span></p>
<p><span>Does it conform to the HUB75 specification? Well, technically no -- it does say it’s a “HUB75-E” on it, so very honestly I could argue I did not receive a HUB75, as the listing claims to sell.</span></p>
<p></p>
<p><span>My rationale is that I go with the least effort. I could return it, but that’s effort. I could rebuild the Matrix C code for AdaFruit’s CircuitPython to support a panel with a “32S” specification. That’s a ton of effort.</span></p>
<p><span>And the least effort here is that I can trivially deal with this panel in AdaFruit using the CircuitPython driver without making one iota of modifications to the CircuitPython library:</span></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:235.50px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:385.48px"><img alt="" src="img_ce409acb33515a73ff7687258c214e0db6685d09ba59dd7230405a727a0c2546i.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p></p>
<p><span>Yep that’s right: I just tell the library that I have a 64 lines panel. Then it expects such a panel to have 5 address pins to select one line out of 32. The only thing is that it means the underlying driver is storing frame buffers which are twice too large, but the MatrixPortal-S3 has way more memory than I need. It also needs to send that second RGB1 line of data, but it does so “at the same time” as the first one, so I don’t think there’s a noticeable performance penalty. OTOH it does mean the refresh rate of the panel is essentially half of the 16S version.</span></p>
<p></p>
<p><span style="font-weight:700">A note on power consumption</span><span>: the AdaFruit docs as well as all the panel docs I found indicate that a 5V 4Amp power supply is needed to fully power the LED matrix panel. I’ve measured mine in </span><span style="font-style:italic">my application</span><span>&nbsp;and found that it typically uses anywhere between 1A and 2A max. The MatrixPortal-S3 powers the panel and it works just fine when powered by a regular USB C brick of 5V 2A spec. My guess is that the consumption is directly related to the number of LEDs simultaneously lit per line -- e.g. a panel that has all the RGB pixels fully lit on at the max refresh rate will inevitably consume more. Even that way, we need to remember that only </span><span style="font-style:italic">one</span><span>&nbsp;or </span><span style="font-style:italic">two</span><span>&nbsp;lines are really turned on at a given time (1 line for a 32S, 2 lines for a 16S), per panel, multiplied by the number of panels if they are chained.</span></p>
<p></p>
<p><span style="font-weight:700">Update 1</span><span>: I recently found out that AdaFruit has a way to </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://learn.adafruit.com/adafruit-matrixportal-m4/pinouts#address-e-line-jumper-3072815" style="color:inherit;text-decoration:inherit">select the pin number of the Addr E on the HUB75 connector of the MatrixPortal S3</a></span><span>. Apparently it can be either “pin 8 or 16”. My display matches the HUB75 connector schematic on the right above, with the Addr E on “pin 8”. Since it’s obviously being driven fine by the MatrixPortal S3, I did not change the jumper on the S3 itself.</span></p>
<p></p>
<p><span style="font-weight:700">Update 2</span><span>: Since the initial prototype worked well, I ordered a couple more panels from AliExpress to expand the system to a couple other turnouts. This time though, I got panels which are labeled as “16S”. That’s what the original AliExpress listing was </span><span style="font-style:italic">supposed</span><span>&nbsp;to have sent, yet they didn’t -- a common issue when ordering from AliExpress, vendors will often send something that’s “more or less like the listing” and they expect end-users to complain if that’s a problem. The “16S” panel works directly with the AdaFruit Matrix class without the need to fake-double the number of lines.</span></p>
<p></p>
<p></p>
<hr>
<p></p>


    </div>



<div class="prev-next-container">


    <span class="prev-page"><a href="2025-07-07_new_wazz_web_dashboard.html">⇐ Newer Post</a><br/></span>
    <span class="next-page"><a href="2025-03-30_distant_signal_matrix_displa_0df54754.html">Older Post ⇒</a><br/></span>

</div>

</div> <!-- container -->
</div> <!-- main -->

<div class="sharethis-inline-share-buttons"></div>

<div class="bottom-container">&nbsp;Generated on 2025-09-05 by Rig4j 0.1-Exp-05cc7b2&nbsp;</div>

</main>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-M1KDMEFC4D"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-M1KDMEFC4D');
</script>

</body>
</html>

