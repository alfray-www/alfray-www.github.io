<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport"    content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author"      content="">

<link href="atom.xml" type="application/atom+xml" rel="alternate" title="Atom feed for Blog: Model Train-related Notes" />

<meta property="og:url"         content="https://www.alfray.com/trains/blog/train/0008.html" />
<meta property="og:type"        content="article" />

<meta property="og:title"       content="Blog: Model Train-related Notes" />
<meta property="og:description" content="The Digispark Tiny is probably the most basic and compact Arduino-like I’ve worked with. It’s about the size of an USB A plug. It is powered by an ATTiny85 and offers 1-5 I/Os depending on usage (typically 2-3)." />
<meta property="og:image"       content="https://www.alfray.com/trains/blog/train/img_ce4e0dea3b382e50bfd66e049725b82b6284106c7e80d14948e821c1abe2d075i.jpg" />

<meta name="twitter:card"        content="summary" />
<!-- meta name="twitter:site"    content="@flickr" / -->

<meta name="twitter:title"       content="Blog: Model Train-related Notes" />
<meta name="twitter:description" content="The Digispark Tiny is probably the most basic and compact Arduino-like I’ve worked with. It’s about the size of an USB A plug. It is powered by an ATTiny85 and offers 1-5 I/Os depending on usage (typically 2-3)." />
<meta name="twitter:image"       content="https://www.alfray.com/trains/blog/train/img_ce4e0dea3b382e50bfd66e049725b82b6284106c7e80d14948e821c1abe2d075i.jpg" />

<title>Blog: Model Train-related Notes</title>

<script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5c66171070e9220011ed1c61&product=inline-share-buttons" async="async"></script>

<!-- Custom styles for this template -->
<style type="text/css">
body {
    font-family: sans-serif;
    margin: 0;
}

.main {
    margin: 8px;
}

p, span {
    line-height: 1.2;
    text-align: justify;
}

p.console {
    margin: 0;
    padding: 0;
}

.container {
    max-width: 95%;
}

@media screen and (min-width: 600px) {
    .container {
        max-width: 60rem;
    }
}

.center-horiz {
    margin: auto;
}

.no-margin-container {
}

/* Header + Title */
.blog-header {
  margin-bottom: 3rem;
  background-color: #428bca;
  box-shadow: inset 0 -.1rem .25rem rgba(0,0,0,.1);
}


.banner-bg-image {
    height: 50px;
    background-image: url("header.jpg");
    background-position: center;
    background-size: 100% auto;
}

@media screen and (min-width: 600px) {
    .banner-bg-image {
        height: 200px;
    }
}


.title-container {
    color: #fff;
    padding: 1rem;
    line-height: 1.5;
    font-weight: 500;
    font-size: 24px;
    font-family: sans-serif;
}

.title-container a {
    color: #fff;
    text-decoration: none;
}

.post-container {
}

.bottom-container {
    margin-top: 8px;
    color: #fff;
    background-color: #428bca;
    font-family: sans-serif;
    text-align: center;
    font-size: small;
    line-height: 1rem;
}

@media screen and (min-width: 600px) {
    .bottom-container {
        font-size: x-small;
    }
}

.post-title-container {
    position: relative;
    background-color: #428bca;
    padding: 0.5rem;
}

.post-title {
    display: inline;
    color: #fff;
    font-weight: 500;
    font-family: sans-serif;
    font-size: 1.5em;
}

a.post-title-link {
    color: #fff;
    text-decoration: none;
}

.post-cat {
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    padding: 0.25rem;
    background-color: #d0e0e3;
    color: #000;
    font-weight: 500;
    font-family: sans-serif;
    font-size: 1.5em;
}

a.post-cat-link {
    color: #000;
    text-decoration: none;
}

.post-cat-label {
    display: block;
    text-align: right;
    color: #000;
    font-size: 0.4em;
}

.prev-next-container {
    overflow: auto;
}

.prev-page {
    float: left;
    line-height: 2em;
}

.next-page {
    float: right;
    line-height: 2em;
}

h1, h2, h3, h4, h5, h6 {
    font-family: sans-serif;
    font-weight: bold;
}

.text-hide {
    font: 0/0 a;
    color: transparent;
    text-shadow: none;
    background-color: transparent;
    border: 0;
}

td p {
    margin: 0;
}


</style>
</head>

<body>

<header class="blog-header">

    <div class="no-margin-container banner-bg-image text-hide">
        Site Banner Image
    </div>

    <div class="title-container">
        <a href="https://www.alfray.com/trains/">Ralf's Train Pages</a>
        
        /
        <a href="0008.html">Blog: Model Train-related Notes</a>
        
    </div>
</header>

<main role="main">
<div class="main">
<div class="container center-horiz">

<p><span> </span></p>
<p><span></span></p>
<p><span> </span></p>
<table style="border-collapse:collapse;border-spacing:0;margin-left:auto;margin-right:auto">
 <tbody>
  <tr style="height:0pt">
   <td colspan="1" rowspan="1" style="background-color:rgb(103, 78, 167);border-bottom-color:rgb(255, 255, 255);border-bottom-style:solid;border-bottom-width:1pt;border-left-color:rgb(255, 255, 255);border-left-style:solid;border-left-width:1pt;border-right-color:rgb(255, 255, 255);border-right-style:solid;border-right-width:1pt;border-top-color:rgb(255, 255, 255);border-top-style:solid;border-top-width:1pt;padding:7.2pt 7.2pt 7.2pt 7.2pt;vertical-align:top;width:149.4pt"><p style="text-align:center"><span style="-webkit-text-decoration-skip:none;color:rgb(255, 217, 102);font-size:14pt;font-weight:700;text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/" style="color:inherit;text-decoration:inherit">Train Pages</a></span></p></td>
   <td colspan="1" rowspan="1" style="background-color:rgb(103, 78, 167);border-bottom-color:rgb(255, 255, 255);border-bottom-style:solid;border-bottom-width:1pt;border-left-color:rgb(255, 255, 255);border-left-style:solid;border-left-width:1pt;border-right-color:rgb(255, 255, 255);border-right-style:solid;border-right-width:1pt;border-top-color:rgb(255, 255, 255);border-top-style:solid;border-top-width:1pt;padding:7.2pt 7.2pt 7.2pt 7.2pt;vertical-align:top;width:149.4pt"><p style="text-align:center"><span style="-webkit-text-decoration-skip:none;color:rgb(255, 217, 102);font-size:14pt;font-weight:700;text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/blog/train/" style="color:inherit;text-decoration:inherit">Tech Blog</a></span></p></td>
   <td colspan="1" rowspan="1" style="background-color:rgb(103, 78, 167);border-bottom-color:rgb(255, 255, 255);border-bottom-style:solid;border-bottom-width:1pt;border-left-color:rgb(255, 255, 255);border-left-style:solid;border-left-width:1pt;border-right-color:rgb(255, 255, 255);border-right-style:solid;border-right-width:1pt;border-top-color:rgb(255, 255, 255);border-top-style:solid;border-top-width:1pt;padding:7.2pt 7.2pt 7.2pt 7.2pt;vertical-align:top;width:149.4pt"><p style="text-align:center"><span style="-webkit-text-decoration-skip:none;color:rgb(255, 217, 102);font-size:14pt;font-weight:700;text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/rtac.html" style="color:inherit;text-decoration:inherit">RTAC Software</a></span></p></td>
   <td colspan="1" rowspan="1" style="background-color:rgb(103, 78, 167);border-bottom-color:rgb(255, 255, 255);border-bottom-style:solid;border-bottom-width:1pt;border-left-color:rgb(255, 255, 255);border-left-style:solid;border-left-width:1pt;border-right-color:rgb(255, 255, 255);border-right-style:solid;border-right-width:1pt;border-top-color:rgb(255, 255, 255);border-top-style:solid;border-top-width:1pt;padding:7.2pt 7.2pt 7.2pt 7.2pt;vertical-align:top;width:149.4pt"><p style="text-align:center"><span style="-webkit-text-decoration-skip:none;color:rgb(255, 217, 102);font-size:14pt;font-weight:700;text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.youtube.com/c/raphaelmoll" style="color:inherit;text-decoration:inherit">Videos</a></span></p></td>
  </tr>
 </tbody>
</table>
<p></p>
<p><span style="font-style:italic">Model Train-related Notes Blog -- t</span><span style="font-style:italic">hese are personal notes and musings on the subject of model train control, automation, electronics, or whatever I find interesting. I also have more posts in a blog dedicated to the maintenance of the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);font-style:italic;text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/blog/randall/" style="color:inherit;text-decoration:inherit">Randall Museum Model Railroad</a></span><span style="font-style:italic">.</span></p>
<p><span></span></p>

<div class="prev-next-container">

    <span class="prev-page"><a href="0007.html">⇐ Newer Posts</a><br/></span>
    <span class="next-page"><a href="0009.html">Older Posts ⇒</a><br/></span>


</div>



    <div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2018-09-02_digispark_tiny.html">
    <h2 class="post-title">2018-09-02 - Digispark Tiny</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    Arduino
    
    </span>
</span></div>

<p><span></span></p>
<p></p>
<p><span>The Digispark Tiny is probably the most basic and compact Arduino-like I’ve worked with. It’s about the size of an USB A plug. It is powered by an ATTiny85 and offers 1-5 I/Os depending on usage (typically 2-3).</span></p>
<p></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:191.00px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:263.00px"><img alt="" src="img_ce4e0dea3b382e50bfd66e049725b82b6284106c7e80d14948e821c1abe2d075i.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p style="text-align:center"><span style="font-size:9pt">(image source: mister-bidouilles.fr)</span></p>
<p><span>Kickstarter Date: 2014.</span></p>
<p></p>
<p><span>Example of the Digispark Tiny connected to an USB OTG with a PIR sensor:</span></p>
<p></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:303.00px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:777.00px"><img alt="" src="img_7bc570920e537667008fb9465ce6de20f7e26f384b7286c4d243fd78ae096bb2i.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p></p>
<p></p>
<p><span></span></p>

<a href="2018-09-02_digispark_tiny.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2018-09-01_conductor_1_and_e-stop.html">
    <h2 class="post-title">2018-09-01 - Conductor 1 and E-Stop</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    Rtac
    
    </span>
</span></div>

<p><span></span></p>
<p></p>
<p><span>Another behavior I </span><span style="font-style:italic">need</span><span>&nbsp;right now in </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/rtac" style="color:inherit;text-decoration:inherit">Conductor</a></span><span>&nbsp;is to have an E-Stop feature when trains get blocked. It’s the 3rd time a train keeps running for an hour or more and is blocked somewhere. Ideally Conductor 2 would have a model of “what’s next” and error management, but I can’t wait for that. </span></p>
<p></p>
<p><span>What I need is simple: a route starts, and if the train has not reached the destination in say 10 minutes, send a stop to the train. We can do that trivially using a timer, which is canceled (aka “timer end”) when the train reaches its destination.</span></p>
<p></p>
<p><span>Although not exposed through the script grammar, JmriThrottleAdapter (.py) and IJmriThrottle (.java) do have an eStop() method (the estop is only used when triggering an e-stop via RTAC). Right now just using a repeated stop should be enough.</span></p>
<p style="text-align:left"><span></span></p>

<a href="2018-09-01_conductor_1_and_e-stop.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2018-08-27_meanwhile_in_conductor_1_.html">
    <h2 class="post-title">2018-08-27 - Meanwhile in Conductor 1…</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    Rtac
    
    </span>
</span></div>

<p><span></span></p>
<p></p>
<p><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/rtac" style="color:inherit;text-decoration:inherit">Conductor 2</a></span><span>&nbsp;is nowhere ready and I need changes now so they go in Conductor 1.</span></p>
<p><span>The desired next step is to support the presence-based activation rather than button activation.</span></p>
<p></p>
<p><span>Although I have plans for a Conductor 2 which would be route-based, at that point this is an orthogonal task and it can be deferred for later.</span></p>
<p></p>
<p><span>Profiles is a Conductor 2 feature, and not tied to a presence sensor.</span></p>
<p></p>
<p><span>What is the minimum “clean” approach needed for the sensor presence?</span></p>
<p><span>What is the minimum I need to provide?</span></p>
<p style="text-align:left"><span></span></p>

<a href="2018-08-27_meanwhile_in_conductor_1_.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2018-08-18_an_update_for_conductor_2.html">
    <h2 class="post-title">2018-08-18 - An update for Conductor 2</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    Rtac
    
    </span>
</span></div>

<p><span></span></p>
<p></p>
<p><span>Several angles of discussion for </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/rtac" style="color:inherit;text-decoration:inherit">Conductor 2</a></span><span>.</span></p>
<p></p>
<p><span>First config file. Drop the ANTLR language. Don’t do a DSL using Groovy/Kotlin. Instead let’s keep it simple and use a Jython-based config file (like BUILD files). Sure it won’t be as eye candy as a gradle-like DSL but it might be easier to create and get started.</span></p>
<p></p>
<p><span>Example of “pythonizing” the current Conductor 1 script:</span></p>
<p></p>
<table style="border-collapse:collapse;border-spacing:0;margin-right:auto">
 <tbody>
  <tr style="height:0pt">
   <td colspan="1" rowspan="1" style="border-bottom-color:rgb(0, 0, 0);border-bottom-style:solid;border-bottom-width:1pt;border-left-color:rgb(0, 0, 0);border-left-style:solid;border-left-width:1pt;border-right-color:rgb(0, 0, 0);border-right-style:solid;border-right-width:1pt;border-top-color:rgb(0, 0, 0);border-top-style:solid;border-top-width:1pt;padding:5pt 5pt 5pt 5pt;vertical-align:top;width:597.6pt"><p style="text-align:left" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">B320 = sensor(“B320”, “NS784”)</span></p><p style="text-align:left" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">T320 = turnout(“T320”, “NT320”)</span></p><p style="text-align:left" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">&nbsp;</span></p><p style="text-align:left" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">PA = route(“Passenger Automation”,</span></p><p style="text-align:left" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;blocks=[B310, T310, T320, B320, T330, B330, B340, B350, B360, T371, B370],</span></p><p style="text-align:left" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;speed_vars=[“mainline”, “station”, “sonora”])</span></p><p style="text-align:left" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">PA.on(B320, delay=10, events=[PA.throttle.speed(5), PA.throttle.horn()])</span></p><p style="text-align:left" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">&nbsp;</span></p><p style="text-align:left" class="console "><span style="font-family:&quot;Consolas&quot;;font-size:9pt;vertical-align:baseline">profile(“RDC”, route=PA, speed_vars={ “mainline”=20, “station”=8 }, …)</span></p></td>
  </tr>
 </tbody>
</table>
<p></p>
<p><span>This is obviously more verbose. There’s a need to carefully stringify arguments and build lists or dicts where needed. However at that point it’s just about building an API, and there’s one benefit in having typed variables (e.g. a sensor var can’t be used where a turnout is used, etc.)</span></p>
<p style="text-align:left"><span></span></p>

<a href="2018-08-18_an_update_for_conductor_2.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2018-05-20_signal_quality_in_advanced_tomato.html">
    <h2 class="post-title">2018-05-20 - Signal quality in Advanced Tomato</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    Misc
    
    </span>
</span></div>

<p><span></span></p>
<p><span>I’ll just leave this here for those who use </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://advancedtomato.com/" style="color:inherit;text-decoration:inherit">Advanced Tomato</a></span><span>&nbsp;on their wifi routers: the “Quality (%)” column in the Device List is not a percentage at all. It’s just a delta from the client’s RSSI to the interface floor noise in dBm.</span></p>
<p></p>
<p><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:201.33px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:796.80px"><img alt="" src="img_9603f5e398e40c16ca52c16b5559e24b51267f8edf9c3fadb2618a55364cb0cei.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:59.00px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:438.00px"><img alt="" src="img_998ccdd05013d209ba7d6cf35c3a3ff8d973ad0d51e0005de8a7d4a52e3484b9i.png" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p></p>
<p><span>From </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://github.com/Jackysi/advancedtomato-gui/blob/RT-N/status-devices.asp" style="color:inherit;text-decoration:inherit">https://github.com/Jackysi/advancedtomato-gui/blob/RT-N/status-devices.asp</a></span><span>, line 248</span><span>:</span></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:84.00px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:434.00px"><img alt="" src="img_ae6f2b18d8cbdd2e764605d4f6c67ea66d06239fea30a07be81cfa866000da0ci.png" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p></p>
<hr>
<p></p>


</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2018-05-10_conductor_2_desiderata.html">
    <h2 class="post-title">2018-05-10 - Conductor 2: Desiderata</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    Rtac
    
    </span>
</span></div>

<p><span></span></p>
<p></p>
<p><span>How would a </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall/rtac" style="color:inherit;text-decoration:inherit">Conductor</a></span><span>&nbsp;2 differ from the current version?</span></p>
<p></p>
<p><span>Requirements</span></p>
<ul style="margin:0">
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Simulator.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Validation via tests.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Visual feedback from internal tests, both real and simulated.</span></li>
</ul>
<p></p>
<p><span>State:</span></p>
<ul style="margin:0">
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Define JMRI turnouts.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Define JMRI block sensors.</span></li>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Define map graph.</span></li>
 <ul>
  <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Define virtual blocks.</span></li>
 </ul>
 <li style="line-height:1.15;padding-bottom:0pt;padding-left:0pt;padding-top:0pt"><span>Define routes.</span></li>
</ul>
<p style="text-align:left"><span></span></p>

<a href="2018-05-10_conductor_2_desiderata.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2018-04-21_mobius_action_cam_vs_runcam_2.html">
    <h2 class="post-title">2018-04-21 - Mobius Action Cam vs Runcam 2</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    Video
    
    </span>
</span></div>

<p><span></span></p>
<p><span>The latest video I did was an update of the full “cab ride” layout tour of the Randall Museum layout. </span></p>
<p></p>
<p style="text-align:center"><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><iframe width="560" height="315" src="https://www.youtube.com/embed/R7KrcTpEHlg" frameborder="0" allowfullscreen></iframe></span></p>
<p></p>
<p><span>In the past I’ve used the same camera as for all my previous cab rides, a </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://amzn.to/2rGJM2x" style="color:inherit;text-decoration:inherit">Mobius Action Cam</a></span><span>. When I tried to use it after a year of inactivity, I realized the battery is dead and won’t hold a charge for more than 10 minutes. I can order a new battery, but maybe it was worth looking at what had changed in the domain in between. Let’s look at the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://amzn.to/2IEdMqg" style="color:inherit;text-decoration:inherit">Runcam 2</a></span><span>.</span></p>
<p></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:235.35px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:526.90px"><img alt="" src="img_cf140af90756b4e5863e62ecadd9ee71b48d36c3a2b1b4579465b4565981cdf6i.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p></p>
<p><span></span></p>

<a href="2018-04-21_mobius_action_cam_vs_runcam_2.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2018-01-21_turnouts_touch_panel_for_jmri_at_cmrs.html">
    <h2 class="post-title">2018-01-21 - Turnouts Touch Panel for JMRI at CMRS</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    CMRS
    
    </span>
</span></div>

<p></p>
<p></p>
<p><span>Some members at the </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="http://www.cmrstrainclub.org/" style="color:inherit;text-decoration:inherit">CMRS train club</a></span><span>&nbsp;(the Carquinez Model Railroad Society, in Crockett, CA) desired to have large touch panels that members could use to toggle switches on the mainline. For testing, one of the members procured 32-inch touch panels and I wrote a quick experimental software to display the mainline on it and control turnouts based on touch.</span></p>
<p></p>
<p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:266.00px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:738.00px"><img alt="" src="img_740b70820c3e1c557ea5985e14f116251735697b69f7374cdc7db4c0a17cd3b6i.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p></p>
<p><span>The touch panels rely on the main </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="http://jmri.org/" style="color:inherit;text-decoration:inherit">JMRI server</a></span><span>&nbsp;to trigger turnouts on the mainline.</span></p>
<p></p>
<p><span>This post documents my first prototype demonstration for this project. This was going to be an iterative process as I expected to incorporate feedback later. What I came up with is fairly easy to reuse for other layouts -- I’ve implemented something similar at Randall just after, so I’ll explain how it is implemented in the hope others want to use that or get inspired by it..</span></p>
<p><span></span></p>

<a href="2018-01-21_turnouts_touch_panel_for_jmri_at_cmrs.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2017-10-31_nce_aiu_and_short_trigger_events.html">
    <h2 class="post-title">2017-10-31 - NCE AIU and Short Trigger Events</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    NCE
    
    </span>
</span></div>

<p><span></span></p>
<p><span>On the Randall layout, visitors press a button to trigger the trains’ automated sequence to start. Very quickly we noticed that sometimes the system would fail to notice the button was pressed.</span></p>
<p></p>
<p><span>We use a large button but that’s irrelevant. The issue has to do with how long it is pressed. Most people give a quick short push, and that’s the problem.</span></p>
<p></p>
<table style="border-collapse:collapse;border-spacing:0;margin-left:auto;margin-right:auto">
 <tbody>
  <tr style="height:0pt">
   <td colspan="1" rowspan="1" style="border-bottom-color:rgb(0, 0, 0);border-bottom-style:solid;border-bottom-width:0pt;border-left-color:rgb(0, 0, 0);border-left-style:solid;border-left-width:0pt;border-right-color:rgb(0, 0, 0);border-right-style:solid;border-right-width:0pt;border-top-color:rgb(0, 0, 0);border-top-style:solid;border-top-width:0pt;vertical-align:middle;width:298.8pt"><p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:241.33px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:396.00px"><img alt="" src="img_3c0dee1fe9afa6378d96b9e39bda694bde0d89c1749aceb2b234f7df25305d97i.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p></td>
   <td colspan="1" rowspan="1" style="border-bottom-color:rgb(0, 0, 0);border-bottom-style:solid;border-bottom-width:0pt;border-left-color:rgb(0, 0, 0);border-left-style:solid;border-left-width:0pt;border-right-color:rgb(0, 0, 0);border-right-style:solid;border-right-width:0pt;border-top-color:rgb(0, 0, 0);border-top-style:solid;border-top-width:0pt;vertical-align:middle;width:298.8pt"><p style="text-align:center"><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:268.00px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:396.00px"><img alt="" src="img_cf00609e36f28098c30476973c54a2ead12ebb31cba31fba653133ede5c35f56i.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p></td>
  </tr>
 </tbody>
</table>
<p></p>
<p><span>The button directly closes the contacts on an </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://ncedcc.zendesk.com/hc/en-us/articles/200933435-Auxilliary-Input-Unit-AIU01-" style="color:inherit;text-decoration:inherit">NCE AIU01</a></span><span>&nbsp;(Auxiliary Input Unit), which is regularly polled by the NCE command station. The computer runs my </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="https://www.alfray.com/trains/randall_rtac.html" style="color:inherit;text-decoration:inherit">Conductor software</a></span><span>&nbsp;which polls JMRI for the status at at least 30 Hz. The AIU01 is polled by the NCE Command Station at an appalling low refresh rate due to the NCE cab bus implementation: if an input doesn't trigger long enough (e.g. 1 second), it will be easily missed. In this case, it’s enough to give a short but quick push to the button and most of the time miss the polling window. The event is simply missed.</span></p>
<p></p>
<p><span>Question is what would be the simplest circuitry possible to make an input trigger longer?</span></p>
<p><span></span></p>

<a href="2017-10-31_nce_aiu_and_short_trigger_events.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>
<div class="post-container">
<div class="post-title-container">
<a class="post-title-link" href="2017-04-12_powering_a_led_off_dcc.html">
    <h2 class="post-title">2017-04-12 - Powering a LED off DCC</h2>
</a>
<span class="post-cat" title="Category">
    <span class="post-cat-label">Category</span>
    <span class="post-cat-text">
    DCC
    
    </span>
</span></div>

<p><span></span></p>
<p><span>Very interesting discussion here: </span><span style="-webkit-text-decoration-skip:none;color:rgb(17, 85, 204);text-decoration:underline;text-decoration-skip-ink:none"><a href="http://cs.trains.com/mrr/f/744/t/230553.aspx" style="color:inherit;text-decoration:inherit">http://cs.trains.com/mrr/f/744/t/230553.aspx</a></span></p>
<p></p>
<p><span>Summary, TL/DR: We can power a LED directly from DCC, just add a resistor to limit to about 10 mA (or less if too bright).</span></p>
<p></p>
<p><span>Suggestion is "nice to have" a reverse parallel diode to limit the reverse voltage on the LED:</span></p>
<p><span style="-webkit-transform:rotate(0.00rad) translateZ(0px);border:0.00px solid #000000;display:inline-block;height:204.00px;margin:0.00px 0.00px;overflow:hidden;transform:rotate(0.00rad) translateZ(0px);width:222.00px"><img alt="" src="img_957a5961a2d5c6fa2cc0cc84ae33d123bc875c6964a5b1c9d22d940e130ec6bfi.jpg" style="margin-left:0.00px;margin-top:0.00px" title=""></span></p>
<p><span>However another comment indicates it's enough to compute R to be within the specs of the reverse voltage of the LED (assuming I have the specs).</span></p>
<p></p>
<p><span></span></p>

<a href="2017-04-12_powering_a_led_off_dcc.html">Click here to continue reading...</a>
<p/>
<hr/>
</div>





<div class="prev-next-container">

    <span class="prev-page"><a href="0007.html">⇐ Newer Posts</a><br/></span>
    <span class="next-page"><a href="0009.html">Older Posts ⇒</a><br/></span>


</div>

</div> <!-- container -->
</div> <!-- main -->

<div class="sharethis-inline-share-buttons"></div>

<div class="bottom-container">&nbsp;Generated on 2025-09-04 by Rig4j 0.1-Exp-05cc7b2&nbsp;</div>

</main>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-M1KDMEFC4D"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-M1KDMEFC4D');
</script>

</body>
</html>

